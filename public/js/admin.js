!function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=1)}({1:function(t,e,a){t.exports=a("KYYh")},"4RJ8":function(t,e,a){var i;i=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i="undefined"!=typeof window,n=i?window:{},o=!!i&&"ontouchstart"in n.document.documentElement,s=!!i&&"PointerEvent"in n,r="".concat("cropper","-crop"),c="".concat("cropper","-disabled"),l="".concat("cropper","-hidden"),h="".concat("cropper","-hide"),d="".concat("cropper","-invisible"),p="".concat("cropper","-modal"),u="".concat("cropper","-move"),m="".concat("cropper","Action"),f="".concat("cropper","Preview"),g=s?"pointerdown":o?"touchstart":"mousedown",v=s?"pointermove":o?"touchmove":"mousemove",b=s?"pointerup pointercancel":o?"touchend touchcancel":"mouseup",y=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,x=/^data:image\/jpeg;base64,/,w=/^img|canvas$/i,$={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},_=Number.isNaN||n.isNaN;function C(t){return"number"==typeof t&&!_(t)}var k=function(t){return t>0&&t<1/0};function S(t){return void 0===t}function T(e){return"object"===t(e)&&null!==e}var M=Object.prototype.hasOwnProperty;function P(t){if(!T(t))return!1;try{var e=t.constructor,a=e.prototype;return e&&a&&M.call(a,"isPrototypeOf")}catch(t){return!1}}function j(t){return"function"==typeof t}var D=Array.prototype.slice;function E(t){return Array.from?Array.from(t):D.call(t)}function z(t,e){return t&&j(e)&&(Array.isArray(t)||C(t.length)?E(t).forEach(function(a,i){e.call(t,a,i,t)}):T(t)&&Object.keys(t).forEach(function(a){e.call(t,t[a],a,t)})),t}var L=Object.assign||function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),i=1;i<e;i++)a[i-1]=arguments[i];return T(t)&&a.length>0&&a.forEach(function(e){T(e)&&Object.keys(e).forEach(function(a){t[a]=e[a]})}),t},R=/\.\d*(?:0|9){12}\d*$/;function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return R.test(t)?Math.round(t*e)/e:t}var A=/^width|height|left|top|marginLeft|marginTop$/;function I(t,e){var a=t.style;z(e,function(t,e){A.test(e)&&C(t)&&(t="".concat(t,"px")),a[e]=t})}function B(t,e){if(e)if(C(t.length))z(t,function(t){B(t,e)});else if(t.classList)t.classList.add(e);else{var a=t.className.trim();a?a.indexOf(e)<0&&(t.className="".concat(a," ").concat(e)):t.className=e}}function F(t,e){e&&(C(t.length)?z(t,function(t){F(t,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function H(t,e,a){e&&(C(t.length)?z(t,function(t){H(t,e,a)}):a?B(t,e):F(t,e))}var X=/([a-z\d])([A-Z])/g;function Y(t){return t.replace(X,"$1-$2").toLowerCase()}function N(t,e){return T(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Y(e)))}function W(t,e,a){T(a)?t[e]=a:t.dataset?t.dataset[e]=a:t.setAttribute("data-".concat(Y(e)),a)}var q=/\s\s*/,U=function(){var t=!1;if(i){var e=!1,a=function(){},o=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});n.addEventListener("test",a,o),n.removeEventListener("test",a,o)}return t}();function V(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=a;e.trim().split(q).forEach(function(e){if(!U){var o=t.listeners;o&&o[e]&&o[e][a]&&(n=o[e][a],delete o[e][a],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,n,i)})}function Z(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=a;e.trim().split(q).forEach(function(e){if(i.once&&!U){var o=t.listeners,s=void 0===o?{}:o;n=function(){delete s[e][a],t.removeEventListener(e,n,i);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];a.apply(t,r)},s[e]||(s[e]={}),s[e][a]&&t.removeEventListener(e,s[e][a],i),s[e][a]=n,t.listeners=s}t.addEventListener(e,n,i)})}function K(t,e,a){var i;return j(Event)&&j(CustomEvent)?i=new CustomEvent(e,{detail:a,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,a),t.dispatchEvent(i)}function J(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Q=n.location,G=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function tt(t){var e=t.match(G);return null!==e&&(e[1]!==Q.protocol||e[2]!==Q.hostname||e[3]!==Q.port)}function et(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function at(t){var e=t.rotate,a=t.scaleX,i=t.scaleY,n=t.translateX,o=t.translateY,s=[];C(n)&&0!==n&&s.push("translateX(".concat(n,"px)")),C(o)&&0!==o&&s.push("translateY(".concat(o,"px)")),C(e)&&0!==e&&s.push("rotate(".concat(e,"deg)")),C(a)&&1!==a&&s.push("scaleX(".concat(a,")")),C(i)&&1!==i&&s.push("scaleY(".concat(i,")"));var r=s.length?s.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function it(t,e){var a=t.pageX,i=t.pageY,n={endX:a,endY:i};return e?n:L({startX:a,startY:i},n)}function nt(t){var e=t.aspectRatio,a=t.height,i=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=k(i),s=k(a);if(o&&s){var r=a*e;"contain"===n&&r>i||"cover"===n&&r<i?a=i/e:i=a*e}else o?a=i/e:s&&(i=a*e);return{width:i,height:a}}var ot=String.fromCharCode;var st=/^data:.*,/;function rt(t){var e,a=new DataView(t);try{var i,n,o;if(255===a.getUint8(0)&&216===a.getUint8(1))for(var s=a.byteLength,r=2;r+1<s;){if(255===a.getUint8(r)&&225===a.getUint8(r+1)){n=r;break}r+=1}if(n){var c=n+10;if("Exif"===function(t,e,a){var i="";a+=e;for(var n=e;n<a;n+=1)i+=ot(t.getUint8(n));return i}(a,n+4,4)){var l=a.getUint16(c);if(((i=18761===l)||19789===l)&&42===a.getUint16(c+2,i)){var h=a.getUint32(c+4,i);h>=8&&(o=c+h)}}}if(o){var d,p,u=a.getUint16(o,i);for(p=0;p<u;p+=1)if(d=o+12*p+2,274===a.getUint16(d,i)){d+=8,e=a.getUint16(d,i),a.setUint16(d,1,i);break}}}catch(t){e=1}return e}var ct={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,a=this.container,i=this.cropper;B(i,l),F(t,l);var n={width:Math.max(a.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(a.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=n,I(i,{width:n.width,height:n.height}),B(t,l),F(i,l)},initCanvas:function(){var t=this.containerData,e=this.imageData,a=this.options.viewMode,i=Math.abs(e.rotate)%180==90,n=i?e.naturalHeight:e.naturalWidth,o=i?e.naturalWidth:e.naturalHeight,s=n/o,r=t.width,c=t.height;t.height*s>t.width?3===a?r=t.height*s:c=t.width/s:3===a?c=t.width/s:r=t.height*s;var l={aspectRatio:s,naturalWidth:n,naturalHeight:o,width:r,height:c};l.left=(t.width-r)/2,l.top=(t.height-c)/2,l.oldLeft=l.left,l.oldTop=l.top,this.canvasData=l,this.limited=1===a||2===a,this.limitCanvas(!0,!0),this.initialImageData=L({},e),this.initialCanvasData=L({},l)},limitCanvas:function(t,e){var a=this.options,i=this.containerData,n=this.canvasData,o=this.cropBoxData,s=a.viewMode,r=n.aspectRatio,c=this.cropped&&o;if(t){var l=Number(a.minCanvasWidth)||0,h=Number(a.minCanvasHeight)||0;s>1?(l=Math.max(l,i.width),h=Math.max(h,i.height),3===s&&(h*r>l?l=h*r:h=l/r)):s>0&&(l?l=Math.max(l,c?o.width:0):h?h=Math.max(h,c?o.height:0):c&&(l=o.width,(h=o.height)*r>l?l=h*r:h=l/r));var d=nt({aspectRatio:r,width:l,height:h});l=d.width,h=d.height,n.minWidth=l,n.minHeight=h,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(s>(c?0:1)){var p=i.width-n.width,u=i.height-n.height;n.minLeft=Math.min(0,p),n.minTop=Math.min(0,u),n.maxLeft=Math.max(0,p),n.maxTop=Math.max(0,u),c&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,2===s&&(n.width>=i.width&&(n.minLeft=Math.min(0,p),n.maxLeft=Math.max(0,p)),n.height>=i.height&&(n.minTop=Math.min(0,u),n.maxTop=Math.max(0,u))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=i.width,n.maxTop=i.height},renderCanvas:function(t,e){var a=this.canvasData,i=this.imageData;if(e){var n=function(t){var e=t.width,a=t.height,i=t.degree;if(90==(i=Math.abs(i)%180))return{width:a,height:e};var n=i%90*Math.PI/180,o=Math.sin(n),s=Math.cos(n),r=e*s+a*o,c=e*o+a*s;return i>90?{width:c,height:r}:{width:r,height:c}}({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),o=n.width,s=n.height,r=a.width*(o/a.naturalWidth),c=a.height*(s/a.naturalHeight);a.left-=(r-a.width)/2,a.top-=(c-a.height)/2,a.width=r,a.height=c,a.aspectRatio=o/s,a.naturalWidth=o,a.naturalHeight=s,this.limitCanvas(!0,!1)}(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,I(this.canvas,L({width:a.width,height:a.height},at({translateX:a.left,translateY:a.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,a=this.imageData,i=a.naturalWidth*(e.width/e.naturalWidth),n=a.naturalHeight*(e.height/e.naturalHeight);L(a,{width:i,height:n,left:(e.width-i)/2,top:(e.height-n)/2}),I(this.image,L({width:a.width,height:a.height},at(L({translateX:a.left,translateY:a.top},a)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,a=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};a&&(e.height*a>e.width?n.height=n.width/a:n.width=n.height*a),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*i),n.height=Math.max(n.minHeight,n.height*i),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=L({},n)},limitCropBox:function(t,e){var a=this.options,i=this.containerData,n=this.canvasData,o=this.cropBoxData,s=this.limited,r=a.aspectRatio;if(t){var c=Number(a.minCropBoxWidth)||0,l=Number(a.minCropBoxHeight)||0,h=s?Math.min(i.width,n.width,n.width+n.left,i.width-n.left):i.width,d=s?Math.min(i.height,n.height,n.height+n.top,i.height-n.top):i.height;c=Math.min(c,i.width),l=Math.min(l,i.height),r&&(c&&l?l*r>c?l=c/r:c=l*r:c?l=c/r:l&&(c=l*r),d*r>h?d=h/r:h=d*r),o.minWidth=Math.min(c,h),o.minHeight=Math.min(l,d),o.maxWidth=h,o.maxHeight=d}e&&(s?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(i.width,n.left+n.width)-o.width,o.maxTop=Math.min(i.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=i.width-o.width,o.maxTop=i.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,a=this.cropBoxData;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,t.movable&&t.cropBoxMovable&&W(this.face,m,a.width>=e.width&&a.height>=e.height?"move":"all"),I(this.cropBox,L({width:a.width,height:a.height},at({translateX:a.left,translateY:a.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),K(this.element,"crop",this.getData())}},lt={initPreview:function(){var t=this.crossOrigin,e=this.options.preview,a=t?this.crossOriginUrl:this.url,i=document.createElement("img");if(t&&(i.crossOrigin=t),i.src=a,this.viewBox.appendChild(i),this.viewBoxImage=i,e){var n=e;"string"==typeof e?n=this.element.ownerDocument.querySelectorAll(e):e.querySelector&&(n=[e]),this.previews=n,z(n,function(e){var i=document.createElement("img");W(e,f,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(i.crossOrigin=t),i.src=a,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(i)})}},resetPreview:function(){z(this.previews,function(t){var e=N(t,f);I(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(T(t[e]))try{delete t[e]}catch(a){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(a){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Y(e)))}(t,f)})},preview:function(){var t=this.imageData,e=this.canvasData,a=this.cropBoxData,i=a.width,n=a.height,o=t.width,s=t.height,r=a.left-e.left-t.left,c=a.top-e.top-t.top;this.cropped&&!this.disabled&&(I(this.viewBoxImage,L({width:o,height:s},at(L({translateX:-r,translateY:-c},t)))),z(this.previews,function(e){var a=N(e,f),l=a.width,h=a.height,d=l,p=h,u=1;i&&(p=n*(u=l/i)),n&&p>h&&(d=i*(u=h/n),p=h),I(e,{width:d,height:p}),I(e.getElementsByTagName("img")[0],L({width:o*u,height:s*u},at(L({translateX:-r*u,translateY:-c*u},t))))}))}},ht={bind:function(){var t=this.element,e=this.options,a=this.cropper;j(e.cropstart)&&Z(t,"cropstart",e.cropstart),j(e.cropmove)&&Z(t,"cropmove",e.cropmove),j(e.cropend)&&Z(t,"cropend",e.cropend),j(e.crop)&&Z(t,"crop",e.crop),j(e.zoom)&&Z(t,"zoom",e.zoom),Z(a,g,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Z(a,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Z(a,"dblclick",this.onDblclick=this.dblclick.bind(this)),Z(t.ownerDocument,v,this.onCropMove=this.cropMove.bind(this)),Z(t.ownerDocument,b,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Z(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,a=this.cropper;j(e.cropstart)&&V(t,"cropstart",e.cropstart),j(e.cropmove)&&V(t,"cropmove",e.cropmove),j(e.cropend)&&V(t,"cropend",e.cropend),j(e.crop)&&V(t,"crop",e.crop),j(e.zoom)&&V(t,"zoom",e.zoom),V(a,g,this.onCropStart),e.zoomable&&e.zoomOnWheel&&V(a,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&V(a,"dblclick",this.onDblclick),V(t.ownerDocument,v,this.onCropMove),V(t.ownerDocument,b,this.onCropEnd),e.responsive&&V(window,"resize",this.onResize)}},dt={resize:function(){var t=this.options,e=this.container,a=this.containerData,i=Number(t.minContainerWidth)||200,n=Number(t.minContainerHeight)||100;if(!(this.disabled||a.width<=i||a.height<=n)){var o,s,r=e.offsetWidth/a.width;if(1!==r||e.offsetHeight!==a.height)t.restore&&(o=this.getCanvasData(),s=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(z(o,function(t,e){o[e]=t*r})),this.setCropBoxData(z(s,function(t,e){s[e]=t*r})))}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,e=r,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,a=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*a,t)))},cropStart:function(t){var e=t.buttons,a=t.button;if(!(this.disabled||C(e)&&1!==e||C(a)&&0!==a||t.ctrlKey)){var i,n=this.options,o=this.pointers;t.changedTouches?z(t.changedTouches,function(t){o[t.identifier]=it(t)}):o[t.pointerId||0]=it(t),i=Object.keys(o).length>1&&n.zoomable&&n.zoomOnTouch?"zoom":N(t.target,m),y.test(i)&&!1!==K(this.element,"cropstart",{originalEvent:t,action:i})&&(t.preventDefault(),this.action=i,this.cropping=!1,"crop"===i&&(this.cropping=!0,B(this.dragBox,p)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var a=this.pointers;t.preventDefault(),!1!==K(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?z(t.changedTouches,function(t){L(a[t.identifier]||{},it(t,!0))}):L(a[t.pointerId||0]||{},it(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,a=this.pointers;t.changedTouches?z(t.changedTouches,function(t){delete a[t.identifier]}):delete a[t.pointerId||0],e&&(t.preventDefault(),Object.keys(a).length||(this.action=""),this.cropping&&(this.cropping=!1,H(this.dragBox,p,this.cropped&&this.options.modal)),K(this.element,"cropend",{originalEvent:t,action:e}))}}},pt={change:function(t){var e,a=this.options,i=this.canvasData,n=this.containerData,o=this.cropBoxData,s=this.pointers,r=this.action,c=a.aspectRatio,h=o.left,d=o.top,p=o.width,u=o.height,m=h+p,f=d+u,g=0,v=0,b=n.width,y=n.height,x=!0;!c&&t.shiftKey&&(c=p&&u?p/u:1),this.limited&&(g=o.minLeft,v=o.minTop,b=g+Math.min(n.width,i.width,i.left+i.width),y=v+Math.min(n.height,i.height,i.top+i.height));var w=s[Object.keys(s)[0]],$={x:w.endX-w.startX,y:w.endY-w.startY},_=function(t){switch(t){case"e":m+$.x>b&&($.x=b-m);break;case"w":h+$.x<g&&($.x=g-h);break;case"n":d+$.y<v&&($.y=v-d);break;case"s":f+$.y>y&&($.y=y-f)}};switch(r){case"all":h+=$.x,d+=$.y;break;case"e":if($.x>=0&&(m>=b||c&&(d<=v||f>=y))){x=!1;break}_("e"),(p+=$.x)<0&&(r="w",h-=p=-p),c&&(u=p/c,d+=(o.height-u)/2);break;case"n":if($.y<=0&&(d<=v||c&&(h<=g||m>=b))){x=!1;break}_("n"),u-=$.y,d+=$.y,u<0&&(r="s",d-=u=-u),c&&(p=u*c,h+=(o.width-p)/2);break;case"w":if($.x<=0&&(h<=g||c&&(d<=v||f>=y))){x=!1;break}_("w"),p-=$.x,h+=$.x,p<0&&(r="e",h-=p=-p),c&&(u=p/c,d+=(o.height-u)/2);break;case"s":if($.y>=0&&(f>=y||c&&(h<=g||m>=b))){x=!1;break}_("s"),(u+=$.y)<0&&(r="n",d-=u=-u),c&&(p=u*c,h+=(o.width-p)/2);break;case"ne":if(c){if($.y<=0&&(d<=v||m>=b)){x=!1;break}_("n"),u-=$.y,d+=$.y,p=u*c}else _("n"),_("e"),$.x>=0?m<b?p+=$.x:$.y<=0&&d<=v&&(x=!1):p+=$.x,$.y<=0?d>v&&(u-=$.y,d+=$.y):(u-=$.y,d+=$.y);p<0&&u<0?(r="sw",d-=u=-u,h-=p=-p):p<0?(r="nw",h-=p=-p):u<0&&(r="se",d-=u=-u);break;case"nw":if(c){if($.y<=0&&(d<=v||h<=g)){x=!1;break}_("n"),u-=$.y,d+=$.y,p=u*c,h+=o.width-p}else _("n"),_("w"),$.x<=0?h>g?(p-=$.x,h+=$.x):$.y<=0&&d<=v&&(x=!1):(p-=$.x,h+=$.x),$.y<=0?d>v&&(u-=$.y,d+=$.y):(u-=$.y,d+=$.y);p<0&&u<0?(r="se",d-=u=-u,h-=p=-p):p<0?(r="ne",h-=p=-p):u<0&&(r="sw",d-=u=-u);break;case"sw":if(c){if($.x<=0&&(h<=g||f>=y)){x=!1;break}_("w"),p-=$.x,h+=$.x,u=p/c}else _("s"),_("w"),$.x<=0?h>g?(p-=$.x,h+=$.x):$.y>=0&&f>=y&&(x=!1):(p-=$.x,h+=$.x),$.y>=0?f<y&&(u+=$.y):u+=$.y;p<0&&u<0?(r="ne",d-=u=-u,h-=p=-p):p<0?(r="se",h-=p=-p):u<0&&(r="nw",d-=u=-u);break;case"se":if(c){if($.x>=0&&(m>=b||f>=y)){x=!1;break}_("e"),u=(p+=$.x)/c}else _("s"),_("e"),$.x>=0?m<b?p+=$.x:$.y>=0&&f>=y&&(x=!1):p+=$.x,$.y>=0?f<y&&(u+=$.y):u+=$.y;p<0&&u<0?(r="nw",d-=u=-u,h-=p=-p):p<0?(r="sw",h-=p=-p):u<0&&(r="ne",d-=u=-u);break;case"move":this.move($.x,$.y),x=!1;break;case"zoom":this.zoom(function(t){var e=L({},t),a=[];return z(t,function(t,i){delete e[i],z(e,function(e){var i=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),s=Math.abs(t.endY-e.endY),r=Math.sqrt(i*i+n*n),c=(Math.sqrt(o*o+s*s)-r)/r;a.push(c)})}),a.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),a[0]}(s),t),x=!1;break;case"crop":if(!$.x||!$.y){x=!1;break}e=J(this.cropper),h=w.startX-e.left,d=w.startY-e.top,p=o.minWidth,u=o.minHeight,$.x>0?r=$.y>0?"se":"ne":$.x<0&&(h-=p,r=$.y>0?"sw":"nw"),$.y<0&&(d-=u),this.cropped||(F(this.cropBox,l),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(o.width=p,o.height=u,o.left=h,o.top=d,this.action=r,this.renderCropBox()),z(s,function(t){t.startX=t.endX,t.startY=t.endY})}},ut={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&B(this.dragBox,p),F(this.cropBox,l),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=L({},this.initialImageData),this.canvasData=L({},this.initialCanvasData),this.cropBoxData=L({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(L(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),F(this.dragBox,p),B(this.cropBox,l)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,z(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,F(this.cropper,c)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,B(this.cropper,c)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=this.canvasData,i=a.left,n=a.top;return this.moveTo(S(t)?t:i+Number(t),S(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=this.canvasData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(C(t)&&(a.left=t,i=!0),C(e)&&(a.top=e,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,e){var a=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(a.width*t/a.naturalWidth,null,e)},zoomTo:function(t,e,a){var i=this.options,n=this.canvasData,o=n.width,s=n.height,r=n.naturalWidth,c=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&i.zoomable){var l=r*t,h=c*t;if(!1===K(this.element,"zoom",{ratio:t,oldRatio:o/r,originalEvent:a}))return this;if(a){var d=this.pointers,p=J(this.cropper),u=d&&Object.keys(d).length?function(t){var e=0,a=0,i=0;return z(t,function(t){var n=t.startX,o=t.startY;e+=n,a+=o,i+=1}),{pageX:e/=i,pageY:a/=i}}(d):{pageX:a.pageX,pageY:a.pageY};n.left-=(l-o)*((u.pageX-p.left-n.left)/o),n.top-=(h-s)*((u.pageY-p.top-n.top)/s)}else P(e)&&C(e.x)&&C(e.y)?(n.left-=(l-o)*((e.x-n.left)/o),n.top-=(h-s)*((e.y-n.top)/s)):(n.left-=(l-o)/2,n.top-=(h-s)/2);n.width=l,n.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return C(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,C(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(C(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=this.imageData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(C(t)&&(a.scaleX=t,i=!0),C(e)&&(a.scaleY=e,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.options,i=this.imageData,n=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){t={x:o.left-n.left,y:o.top-n.top,width:o.width,height:o.height};var s=i.width/i.naturalWidth;if(z(t,function(e,a){t[a]=e/s}),e){var r=Math.round(t.y+t.height),c=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=c-t.x,t.height=r-t.y}}else t={x:0,y:0,width:0,height:0};return a.rotatable&&(t.rotate=i.rotate||0),a.scalable&&(t.scaleX=i.scaleX||1,t.scaleY=i.scaleY||1),t},setData:function(t){var e=this.options,a=this.imageData,i=this.canvasData,n={};if(this.ready&&!this.disabled&&P(t)){var o=!1;e.rotatable&&C(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,o=!0),e.scalable&&(C(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,o=!0),C(t.scaleY)&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var s=a.width/a.naturalWidth;C(t.x)&&(n.left=t.x*s+i.left),C(t.y)&&(n.top=t.y*s+i.top),C(t.width)&&(n.width=t.width*s),C(t.height)&&(n.height=t.height*s),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?L({},this.containerData):{}},getImageData:function(){return this.sized?L({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&z(["left","top","width","height","naturalWidth","naturalHeight"],function(a){e[a]=t[a]}),e},setCanvasData:function(t){var e=this.canvasData,a=e.aspectRatio;return this.ready&&!this.disabled&&P(t)&&(C(t.left)&&(e.left=t.left),C(t.top)&&(e.top=t.top),C(t.width)?(e.width=t.width,e.height=t.width/a):C(t.height)&&(e.height=t.height,e.width=t.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,a,i=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&P(t)&&(C(t.left)&&(i.left=t.left),C(t.top)&&(i.top=t.top),C(t.width)&&t.width!==i.width&&(e=!0,i.width=t.width),C(t.height)&&t.height!==i.height&&(a=!0,i.height=t.height),n&&(e?i.height=i.width/n:a&&(i.width=i.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,n){var o=e.aspectRatio,s=e.naturalWidth,r=e.naturalHeight,c=e.rotate,l=void 0===c?0:c,h=e.scaleX,d=void 0===h?1:h,p=e.scaleY,u=void 0===p?1:p,m=i.aspectRatio,f=i.naturalWidth,g=i.naturalHeight,v=n.fillColor,b=void 0===v?"transparent":v,y=n.imageSmoothingEnabled,x=void 0===y||y,w=n.imageSmoothingQuality,$=void 0===w?"low":w,_=n.maxWidth,C=void 0===_?1/0:_,k=n.maxHeight,S=void 0===k?1/0:k,T=n.minWidth,M=void 0===T?0:T,P=n.minHeight,j=void 0===P?0:P,D=document.createElement("canvas"),E=D.getContext("2d"),z=nt({aspectRatio:m,width:C,height:S}),L=nt({aspectRatio:m,width:M,height:j},"cover"),R=Math.min(z.width,Math.max(L.width,f)),A=Math.min(z.height,Math.max(L.height,g)),I=nt({aspectRatio:o,width:C,height:S}),B=nt({aspectRatio:o,width:M,height:j},"cover"),F=Math.min(I.width,Math.max(B.width,s)),H=Math.min(I.height,Math.max(B.height,r)),X=[-F/2,-H/2,F,H];return D.width=O(R),D.height=O(A),E.fillStyle=b,E.fillRect(0,0,R,A),E.save(),E.translate(R/2,A/2),E.rotate(l*Math.PI/180),E.scale(d,u),E.imageSmoothingEnabled=x,E.imageSmoothingQuality=$,E.drawImage.apply(E,[t].concat(a(X.map(function(t){return Math.floor(O(t))})))),E.restore(),D}(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),o=n.x,s=n.y,r=n.width,c=n.height,l=i.width/Math.floor(e.naturalWidth);1!==l&&(o*=l,s*=l,r*=l,c*=l);var h=r/c,d=nt({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=nt({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=nt({aspectRatio:h,width:t.width||(1!==l?i.width:r),height:t.height||(1!==l?i.height:c)}),m=u.width,f=u.height;m=Math.min(d.width,Math.max(p.width,m)),f=Math.min(d.height,Math.max(p.height,f));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=O(m),g.height=O(f),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,m,f);var b=t.imageSmoothingEnabled,y=void 0===b||b,x=t.imageSmoothingQuality;v.imageSmoothingEnabled=y,x&&(v.imageSmoothingQuality=x);var w,$,_,C,k,S,T=i.width,M=i.height,P=o,j=s;P<=-r||P>T?(P=0,w=0,_=0,k=0):P<=0?(_=-P,P=0,k=w=Math.min(T,r+P)):P<=T&&(_=0,k=w=Math.min(r,T-P)),w<=0||j<=-c||j>M?(j=0,$=0,C=0,S=0):j<=0?(C=-j,j=0,S=$=Math.min(M,c+j)):j<=M&&(C=0,S=$=Math.min(c,M-j));var D=[P,j,w,$];if(k>0&&S>0){var E=m/r;D.push(_*E,C*E,k*E,S*E)}return v.drawImage.apply(v,[i].concat(a(D.map(function(t){return Math.floor(O(t))})))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||S(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,a=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var n="crop"===t,o=e.movable&&"move"===t;t=n||o?t:"none",e.dragMode=t,W(a,m,t),H(a,r,n),H(a,u,o),e.cropBoxMovable||(W(i,m,t),H(i,r,n),H(i,u,o))}return this}},mt=n.Cropper,ft=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!w.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=L({},$,P(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var a,i,o;return a=t,o=[{key:"noConflict",value:function(){return window.Cropper=mt,t}},{key:"setDefaults",value:function(t){L($,P(t)&&t)}}],(i=[{key:"init",value:function(){var t,e=this.element,a=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===a){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===a&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var a=this.element,i=this.options;if(i.rotatable||i.scalable||(i.checkOrientation=!1),i.checkOrientation&&window.ArrayBuffer)if(x.test(t))this.read((n=t.replace(st,""),o=atob(n),s=new ArrayBuffer(o.length),z(r=new Uint8Array(s),function(t,e){r[e]=o.charCodeAt(e)}),s));else{var n,o,s,r,c=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=l,c.onerror=l,c.ontimeout=l,c.onprogress=function(){"image/jpeg"!==c.getResponseHeader("content-type")&&c.abort()},c.onload=function(){e.read(c.response)},c.onloadend=function(){e.reloading=!1,e.xhr=null},i.checkCrossOrigin&&tt(t)&&a.crossOrigin&&(t=et(t)),c.open("GET",t),c.responseType="arraybuffer",c.withCredentials="use-credentials"===a.crossOrigin,c.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,a=this.imageData,i=rt(t),n=0,o=1,s=1;if(i>1){this.url=function(t,e){for(var a=[],i=new Uint8Array(t);i.length>0;)a.push(ot.apply(null,E(i.subarray(0,8192)))),i=i.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(a.join("")))}(t,"image/jpeg");var r=function(t){var e=0,a=1,i=1;switch(t){case 2:a=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,a=-1;break;case 8:e=-90}return{rotate:e,scaleX:a,scaleY:i}}(i);n=r.rotate,o=r.scaleX,s=r.scaleY}e.rotatable&&(a.rotate=n),e.scalable&&(a.scaleX=o,a.scaleY=s),this.clone()}},{key:"clone",value:function(){var t,e,a=this.element,i=this.url;this.options.checkCrossOrigin&&tt(i)&&((t=a.crossOrigin)?e=i:(t="anonymous",e=et(i))),this.crossOrigin=t,this.crossOriginUrl=e;var n=document.createElement("img");t&&(n.crossOrigin=t),n.src=e||i,this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),B(n,h),a.parentNode.insertBefore(n,a.nextSibling)}},{key:"start",value:function(){var t=this,e=this.isImg?this.element:this.image;e.onload=null,e.onerror=null,this.sizing=!0;var a=n.navigator&&/^(?:.(?!chrome|android))*safari/i.test(n.navigator.userAgent),i=function(e,a){L(t.imageData,{naturalWidth:e,naturalHeight:a,aspectRatio:e/a}),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||a){var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){i(o.width,o.height),a||s.removeChild(o)},o.src=e.src,a||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}else i(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,a=this.image,i=t.parentNode,n=document.createElement("div");n.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=n.querySelector(".".concat("cropper","-container")),s=o.querySelector(".".concat("cropper","-canvas")),r=o.querySelector(".".concat("cropper","-drag-box")),c=o.querySelector(".".concat("cropper","-crop-box")),p=c.querySelector(".".concat("cropper","-face"));this.container=i,this.cropper=o,this.canvas=s,this.dragBox=r,this.cropBox=c,this.viewBox=o.querySelector(".".concat("cropper","-view-box")),this.face=p,s.appendChild(a),B(t,l),i.insertBefore(o,t.nextSibling),this.isImg||F(a,h),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,B(c,l),e.guides||B(c.getElementsByClassName("".concat("cropper","-dashed")),l),e.center||B(c.getElementsByClassName("".concat("cropper","-center")),l),e.background&&B(o,"".concat("cropper","-bg")),e.highlight||B(p,d),e.cropBoxMovable&&(B(p,u),W(p,m,"all")),e.cropBoxResizable||(B(c.getElementsByClassName("".concat("cropper","-line")),l),B(c.getElementsByClassName("".concat("cropper","-point")),l)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),j(e.ready)&&Z(t,"ready",e.ready,{once:!0}),K(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),F(this.element,l))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&e(a.prototype,i),o&&e(a,o),t}();return L(ft.prototype,ct,lt,ht,dt,pt,ut),ft},t.exports=i()},KYYh:function(t,e,a){function i(){$(".text-editor").each(function(t,e){$(this).prop("id","ckedit"+t+"x"),CKEDITOR.replace("ckedit"+t+"x")}),$(".text-editor-simple").each(function(t,e){$(this).prop("id","ckedit-simple"+t+"x"),CKEDITOR.replace("ckedit-simple"+t+"x",{customConfig:"/adminbsb/ckeditor/config-simple.js"})}),$(".text-editor-table").each(function(t,e){$(this).prop("id","ckedit-table"+t+"x"),CKEDITOR.replace("ckedit-table"+t+"x",{customConfig:"/adminbsb/ckeditor/config-table.js"})}),$(".text-editor-content").each(function(t,e){$(this).prop("id","ckedit-content"+t+"x"),CKEDITOR.replace("ckedit-content"+t+"x",{customConfig:"/adminbsb/ckeditor/config-content.js"})})}a("ZR5S"),a("SnYR"),$('[data-fancybox="gallery"]').fancybox({zoom:!0}),$(".button-logout").on("click",function(t){t.preventDefault(),document.getElementById("logout-form").submit()}),$(".js-table").each(function(t,e){$this=$(this);var a="table_"+t;a=$(".js-table").DataTable({dom:"Bfrtip",pageLength:100,buttons:["copy","csv","excel","pdf","print"]}),void 0!==$this.data("order-column")&&void 0!==$this.data("order-type")&&a.order([$this.data("order-column")-1,$this.data("order-type")]).draw()}),i(),$(document).on("click",".enable",function(){var t=$(this),e=t.data("id"),a=t.attr("name"),i=t.val(),n=$("#ajaxUrl").val();$.ajax({url:"/admin/"+n+"/"+a,method:"POST",data:{id:e,check:i},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(e){"ok"==e.status&&(console.log(e.message),t.val(e.value))}})}),$(document).on("click",".item-remove",function(t){t.preventDefault();var e=$(this).closest("tr"),a=e.attr("item-id"),i=$("#ajaxUrl").val();$.ajax({url:"/admin/"+i+"/remove",method:"POST",data:{id:a},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(t){"ok"==t.status&&(console.log(t.message),e.remove())}})}),$(document).on("change",'[name="is_category_check"]',function(){var t=$('[name="is_category"]'),e=t.val(),a=t.data("id"),n=$("#ajaxUrl").val();$.ajax({url:"/admin/"+n+"/is-category",method:"POST",data:{id:a,check:e},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(a){e=1==e?0:1,t.val(e),$(".category-block").html(a),$("select").selectpicker("refresh"),0==e&&i()}})}),data_delete="",$(document).on("click",".js_del_data",function(t){data_delete=this,t.preventDefault(),$(this).removeClass("js_del_data"),$("#modal_delete").modal("show")}),$(document).on("click",".js_confirm_delete",function(){data_delete.click(),$("#modal_delete").modal("hide")}),$(document).on("click","button.addParam",function(){var t=$(this),e=t.data("param"),a=$("#ajaxUrl").val(),i="/admin/param/add-param";if(t.hasClass("changeParam"))i="/admin/"+a+"/"+t.data("action");$.ajax({url:i,method:"POST",data:{param:e},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(e){t.closest(".params").find(".params-items").append(e),$("select").selectpicker("refresh"),$("*").hasClass("params-items")&&($(".params-item.unique").each(function(t){var e=$(this);$("input",e).attr("name","unique["+t+"][title]"),$("textarea",e).attr("name","unique["+t+"][desc]")}),$(".params-item.p-price").each(function(t){var e=$(this);$("input.title",e).attr("name","price["+t+"][title]"),$("input.price",e).attr("name","price["+t+"][price]"),$("input.amount",e).attr("name","price["+t+"][amount]")}),$(".params-item.p-service").each(function(t){var e=$(this);$("input.title",e).attr("name","service["+t+"][title]")}),$(".params-item.p-place").each(function(t){var e=$(this);$("input.title",e).attr("name","place["+t+"][title]")}))}})}),$(document).on("click","button.removeButton",function(){var t=(r=$(this)).closest(".params-item"),e=$("#ajaxUrl").val();if(r.hasClass("removeArrJson")){e="/admin/removeArrJson";var a=(r=$(this).closest(".thumbnail")).attr("id"),i=r.data("column"),n=r.data("model"),o=r.data("arr"),s=r.data("index");a&&i&&n&&o&&(s||(s=""),$.ajax({url:e,method:"POST",data:{id:a,column:i,model:n,arr:o,index:s},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(t){"ok"==t.status&&(console.log(t.message),r.remove())}}))}else if(r.hasClass("removeImage")){a=(r=$(this).closest(".thumbnail")).attr("id"),i=r.data("column"),n=r.data("model");var r,c=r.data("remove");$.ajax({url:"/admin/"+e+"/remove-image",method:"POST",data:{id:a,column:i,model:n,remove:c},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(t){"ok"==t.status&&(console.log(t.message),1==r.closest(".images-table").length&&(r=r.closest("tr")),r.remove())}})}else if(r.hasClass("designWork")){a=r.data("id"),s=r.data("index");$.ajax({url:"/admin/"+e+"/remove-work-image",method:"POST",data:{id:a,index:s},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(e){"ok"==e.status&&(console.log(e.message),t.remove())}})}else t.remove()});$(".order-table tbody").sortable({helper:function(t,e){var a=e.children(),i=e.clone();return i.children().each(function(t){$(this).width(a.eq(t).width())}),i},stop:function(t,e){console.log($("td.index",e.item.parent())),$("td.index",e.item.parent()).each(function(t){var e=t+1;$(this).html(e);var a=$(this).parent(".order-table tbody tr").attr("id"),i=$("#ajaxUrl").val();$(this).closest("table").hasClass("images-table")&&(i+="/image"),$(this).closest("table").hasClass("service-blocks")&&(i=$("#service_block_url").val()),$.ajax({url:"/admin/"+i+"/change-position",method:"POST",data:{id:a,position:e},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(t){},error:function(t){console.log(t)}})})}}),$(document).on("click","div.js_spoiler",function(){var t=$(this).data("spoiler_id"),e=$("#"+t);"none"==e.css("display")?e.slideDown(500):"block"==e.css("display")&&e.slideUp(400)}),$(document).on("click","button.js_switch",function(){var t=$(this);$(".js_switch").removeClass("active"),t.addClass("active"),$(".langActive_insert").removeClass("active_insert"),$(".history_gallery .title_hidden").removeClass("active"),$(".js_lang_"+t.data("switch")).addClass("active_insert"),$(".history_gallery .js_lang_bn_"+t.data("switch")).addClass("active")}),$(document).on("click",".js_default_lang",function(){var t=$(this),e=t.data("id"),a=$(".js_default_lang");$.ajax({url:"/admin/language/default_lang",method:"POST",data:{id:e},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(e){"ok"==e&&(a.removeClass("btn-primary"),a.addClass("btn-default"),t.removeClass("btn-default"),t.addClass("btn-primary"))}})});var n=1;$(document).on("click",".js_add_image",function(){var t=$(".create_blocks .block");n+=1,$.ajax({url:"/admin/item/image",method:"POST",data:{id:n},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(e){t.append(e)}})}),$(document).on("click",".js_minus_image",function(t){$(this).closest(".bn").remove()}),$(document).on("click",".js_minus_image_ajax",function(t){var e=$(this).data("id");$.ajax({url:"/admin/item/image-delete",method:"POST",data:{id:e},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(e){"ok"==e&&$(t.target).closest(".bn").remove()}})}),$(document).on("click",".js_select_goods",function(){var t=$(this),e=t.data("id"),a=t.data("main_id");$.ajax({url:"/admin/item/view-goods/",method:"POST",data:{id:e,main_id:a},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(e){console.log(e),"del"==e?(t.removeClass("btn-primary"),t.addClass("btn-default")):"add"==e&&(t.removeClass("btn-default"),t.addClass("btn-primary"))}})}),$(".js_comment").click(function(){$("#modal_reviews .modal").addClass("modal_active")})},SnYR:function(t,e,a){var i,n,o={},s=0,r=!1,c=[];function l(){$("#image_manager #upload_block").removeClass("active"),$("#image_manager .cropper_block").removeClass("active"),$("#image_manager .resize_block").removeClass("active"),$("#image_manager .delete_block").removeClass("active"),$("#image_manager .replace_block").removeClass("active"),$("#image_manager .overlay_modal").css("display","none")}function h(){p=!1,u=2,m=2;var t=$("#image_manager .ajax_content .flex"),e=$("#image_manager .ajax_content .load");$("#image_manager .right .act").html(" --- "),$("#image_manager .right .monitor").html(" --- "),$("#image_manager .right .info").html(" --- "),$("#image_manager .right .del").html(" --- "),$("#image_manager #filemanager_search input").val(""),$("#image_manager .ajax_content .bn").remove(),$("#image_manager .ajax_content .pagination").remove(),$("#image_manager .ajax_content .load").addClass("loading"),$.ajax({url:"/admin/admin/filemanager_load",method:"GET",data:{dinamic_images:c},beforeSend:function(){e.addClass("loading")},success:function(e){t.prepend(e.view),d(e.page,e.total)},error:function(t){console.log(t)}}).done(function(t){e.removeClass("loading")})}function d(t,e,a){void 0===a&&(a=1);var i=$("#image_manager .ajax_content .paginate_block");$.ajax({url:"/admin/admin/filemanager_paginator",method:"POST",data:{page:t,total:e,active:a},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(t){i.html(t)},error:function(t){console.log(t)}})}$(document).on("click",".filemanager_open",function(){n=$(this).data("basic_id"),r=!1,$("#image_manager").modal("toggle"),h()}),window.call_filemanager=function(t){r=!0,i=t,$("#image_manager").modal("toggle"),h()},$(document).on("click","#image_manager .upload_file",function(){$("#image_manager #upload_block").addClass("active"),$("#image_manager .overlay_modal").css("display","block")}),$(document).on("click","#image_manager .right .act .js_view",function(t){var e=t.target.dataset.image;$("#image_manager .view_block").addClass("active"),$("#image_manager .overlay_modal").css("display","block"),$("#image_manager .view_block .view").attr("style","background: url(/files/"+e+")")}),$(document).on("click","#image_manager .right .act .js_crop",function(t){var e=t.target.dataset.image;$("#image_manager .cropper_block").addClass("active"),$("#image_manager .overlay_modal").css("display","block"),$("#image_manager .cropper_block .crop .left img").attr("src","/files/"+e);var a=$(this).data("id"),i=$(this).data("type");setTimeout(function(){!function(t,e){filemanager_fileid=t,filemanager_fileType=e;var a=document.getElementById("file_cropImage");null!==cropper&&cropper.destroy();cropper=new Cropper(a,{viewMode:2,ready:function(){this.cropper.clear()},crop:function(t){$("#image_manager .crop_monitor_w").text(Math.round(t.detail.width)),$("#image_manager .crop_monitor_h").text(Math.round(t.detail.height)),$("#image_manager .crop_monitor_r").text(Math.round(t.detail.rotate))}}),cropper_zoom=0,cropper_move_x=0,cropper_move_y=0,cropper_rotate=0,cropper_scale_x=!0,cropper_scale_y=!0}(a,i)},200)}),$(document).on("click","#image_manager .right .act .js_resize",function(t){var e=t.target.dataset.width,a=t.target.dataset.height,i=t.target.dataset.image;$("#image_manager .resize_block").addClass("active"),$("#image_manager .overlay_modal").css("display","block"),$("#image_manager .resize_block .resize .js_width").html(e+"px"),$("#image_manager .resize_block .resize .js_heigth").html(a+"px"),$('#image_manager #js_resizend [name="id"]').val($(this).data("id")),$('#image_manager #js_resizend [name="image"]').val(i)}),$(document).on("click","#image_manager .right .js_replace",function(){var t=event.target.dataset.id;filemanager_fileid=t,$("#image_manager #replace_block").addClass("active"),$("#image_manager .overlay_modal").css("display","block")}),$(document).on("click","#image_manager .js_alert",function(){$(this).remove()}),cropper=null,$(document).on("click","#image_manager .overlay_modal",function(){$("#image_manager #upload_block").removeClass("active"),$("#image_manager .view_block").removeClass("active"),$("#image_manager .cropper_block").removeClass("active"),$("#image_manager .resize_block").removeClass("active"),$("#image_manager .delete_block").removeClass("active"),$("#image_manager .replace_block").removeClass("active"),$("#image_manager .overlay_modal").css("display","none"),null!==cropper&&cropper.destroy()}),document.getElementById("select_init").addEventListener("change",function(t){var e=$("#image_manager .alerts"),a=$("#image_manager #upload_block .load"),i=$("#image_manager .ajax_content .bn .rubber"),n=$("#image_manager .ajax_content .flex");e.empty();var o=t.target.files;[].forEach.call(o,function(t,o){if(t.type.match("image.*")){var s=new FileReader;s.onload=function(s){$.ajax({url:"/admin/admin/filemanager",method:"POST",data:{name:t.name,image:s.target.result,size:t.size,type:t.type},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){a.addClass("loading")},success:function(t){n.prepend(t)},error:function(i){e.append('<button class="alert alert-danger js_alert" role="alert"><span class="badge">'+o+"</span> "+t.name+" - "+i.responseJSON+"</button>"),a.removeClass("loading"),l()}}).done(function(t){a.removeClass("loading"),i.removeClass("blue"),l()})},s.readAsDataURL(t)}else e.append('<button class="alert alert-danger js_alert" role="alert"><span class="badge">'+o+"</span> "+t.name+" - не является изображением (jpg, png, gif)</button>"),l()})},!1),document.getElementById("replace_init").addEventListener("change",function(t){var e=$("#image_manager .alerts"),a=$("#image_manager #replace_block .load");e.empty();var i=t.target.files;if(i[0].type.match("image.*")){var n=new FileReader;n.onload=function(t){$.ajax({url:"/admin/admin/filemanager_replace",method:"POST",data:{id:filemanager_fileid,image:t.target.result,size:i[0].size,type:i[0].type},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){a.addClass("loading")},success:function(t){b(t),$('#image_manager .ajax_content .bn .column [data-id="'+s+'"]').trigger("click"),l()},error:function(t){e.append('<button class="alert alert-danger js_alert" role="alert">'+i[0].name+" - "+t.responseJSON+"</button>"),a.removeClass("loading"),l()}}).done(function(t){a.removeClass("loading"),l()})},n.readAsDataURL(i[0])}else e.append('<button class="alert alert-danger js_alert" role="alert">'+i[0].name+" - не является изображением (jpg, png, gif)</button>"),l()},!1);var p=!1,u=2;$("#image_manager .ajax_content").on("scroll",function(){var t=$(this)[0],e=t.scrollTop,a=t.scrollHeight-t.clientHeight,i=$("#image_manager .ajax_content .flex");if(a-e==0){var n=$("#id-paginate").attr("data-last-page");!p&&u<=n&&$.ajax({url:"/admin/admin/filemanager_load",method:"POST",data:{page:u},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(t){i.append(t.view)},error:function(t){console.log(t)}}).done(function(t){p=!1,u++})}});var m=2;function f(t){for(var e in c)if(c[e].id==t)return"?id="+c[e].rand}function g(t){return String(t).length>6?(t/1024/1024).toFixed(1)+"Мб":String(t).length<=6?(t/1024).toFixed(1)+"Кб":void 0}function v(t,e){return"act"==t?'<div class="file_title">Действие</div><div><button class="btn btn-primary js_view" data-image="'+e.image+'">Посмотреть</button><button class="btn btn-default js_crop" data-id="'+e.id+'" data-image="'+e.image+'" data-type="'+e.type+'">Обрезать</button><button class="btn btn-default js_resize" data-id="'+e.id+'" data-width="'+e.width+'" data-height="'+e.height+'" data-image="'+e.image+'">Изменить размер</button><button class="btn btn-default js_replace" data-id="'+e.id+'">Заменить</button></div>':"monitor"==t?'<div class="file_monitor"><div class="file_title">Монитор</div><div><div class="param"><b>Формат:</b> '+("image/jpeg"==(a=e.type)?"jpeg":"image/png"==a?"png":"image/gif"==a?"gif":"image/svg+xml"==a?"svg":void 0)+'</div><div class="param"><b>Ширина:</b> <span class="js_monitor_w">'+e.width+'</span>px</div><div class="param"><b>Высота:</b> <span class="js_monitor_h">'+e.height+'</span>px</div><div class="param"><b>Размер:</b> <span class="js_monitor_s">'+e.mass+'</span></div><div class="param"><b>Дата:</b> '+e.created_at+"</div></div></div>":"info"==t?'<div class="file_altblock"><div class="file_title">Инфо</div><form id="filemanager_name_alt"><div class="col-sm-12"><div class="form-group"><div class="form-line"><input type="hidden" name="id" value="'+e.id+'"><input type="text" class="form-control" name="name" placeholder="Заголовок..." value="'+e.name+'"></div></div></div><div class="col-sm-12"><div class="form-group"><div class="form-line"><input type="text" class="form-control" name="alt" placeholder="Alt..." value="'+e.alt+'"></div></div></div><button type="submit" class="btn btn-primary">Сохранить</button></form></div>':"del"==t?'<div class="file_title">Удалить изображение</div><button class="btn btn-danger js_delete" data-id="'+e.id+'">Удалить</button>':void 0;var a}function b(t){if(0==c.length)c.push({id:t.id,rand:t.rand});else{var e=!0;for(var a in c)c[a].id==t.id&&(e=!1,c[a].rand=t.rand);e&&c.push({id:t.id,rand:t.rand})}var i=$("#image_manager .bn [data-id="+t.id+"]");$("#image_manager .ajax_content .bn [data-id="+t.id+"] .image").attr("style","background-image: url(/files/"+t.image+f(t.id)+")"),i.attr("data-image",t.image+f(t.id)),i.attr("data-type",t.type),i.attr("data-mass",t.size);var n=$("#image_manager .js_resize");n.attr("data-width",Math.round(t.width)),n.attr("data-height",Math.round(t.height)),n.attr("data-image",t.image+f(t.id)),$("#image_manager .file_monitor .js_monitor_w").text(Math.round(t.width)),$("#image_manager .file_monitor .js_monitor_h").text(Math.round(t.height)),$("#image_manager .file_monitor .js_monitor_s").text(g(t.size))}$(document).on("click","#image_manager .ajax_content .pagination .page-link",function(){var t=$(this).text(),e=$("#image_manager .ajax_content .flex");u=Number(t)+1,$("#image_manager .ajax_content .bn").remove();var a=$("#id-paginate").attr("data-last-page");!p&&m<=a&&$.ajax({url:"/admin/admin/filemanager_load",method:"POST",data:{page:t},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(a){e.append(a.view),d(a.page,a.total,t)},error:function(t){console.log(t)}}).done(function(t){p=!1})}),$(document).on("click","#image_manager .ajax_content .bn .js_select",function(t){$("#image_manager .js_select").removeClass("active"),$(this).addClass("active");var e=t.target.dataset.id,a=t.target.dataset.name,i=t.target.dataset.image,n=t.target.dataset.alt,r=t.target.dataset.mass,c=t.target.dataset.type,l=t.target.dataset.created_at,h=$("#image_manager .right .act"),d=$("#image_manager .right .monitor"),p=$("#image_manager .right .info"),u=$("#image_manager .right .del"),m=new Image;m.onload=function(){var t={id:e,name:a,image:i,alt:n,mass:g(r),created_at:l,width:Math.round(m.width),height:Math.round(m.height),type:c};h.empty(),d.empty(),p.empty(),u.empty(),h.html(v("act",t)),d.html(v("monitor",t)),p.html(v("info",t)),u.html(v("del",t)),s=e,o={image:i,alt:n,width:t.width,height:t.height}},m.src="/files/"+i}),a("4RJ8"),filemanager_fileType="image/jpg",$(document).on("click",".cropper_frame_set",function(){null!==cropper&&cropper.crop()}),$(document).on("click",".cropper_frame_remove",function(){null!==cropper&&cropper.clear()}),$(document).on("click",".cropper_zoom_plus",function(){null!==cropper&&cropper.zoom(cropper_zoom+.1)}),$(document).on("click",".cropper_zoom_minus",function(){null!==cropper&&cropper.zoom(cropper_zoom-.1)}),$(document).on("click",".cropper_arr_left",function(){null!==cropper&&cropper.move(cropper_move_x+4,cropper_move_y)}),$(document).on("click",".cropper_arr_up",function(){null!==cropper&&cropper.move(cropper_move_x,cropper_move_y+4)}),$(document).on("click",".cropper_arr_right",function(){null!==cropper&&cropper.move(cropper_move_x-4,cropper_move_y)}),$(document).on("click",".cropper_arr_down",function(){null!==cropper&&cropper.move(cropper_move_x,cropper_move_y-4)}),$(document).on("click",".cropper_rotate_undo",function(){null!==cropper&&cropper.rotate(cropper_rotate+45)}),$(document).on("click",".cropper_rotate_next",function(){null!==cropper&&cropper.rotate(cropper_rotate-45)}),$(document).on("click",".cropper_arrows_h",function(){null!==cropper&&(!0===cropper_scale_x?(cropper_scale_x=!1,cropper.scale(-1,1)):!1===cropper_scale_x&&(cropper_scale_x=!0,cropper.scale(1,1)))}),$(document).on("click",".cropper_arrows_v",function(){null!==cropper&&(!0===cropper_scale_y?(cropper_scale_y=!1,cropper.scale(1,-1)):!1===cropper_scale_y&&(cropper_scale_y=!0,cropper.scale(1,1)))}),$(document).on("click",".js_cropend",function(){var t=cropper.getCroppedCanvas().toDataURL(filemanager_fileType,1),e=$("#image_manager .js_cropend"),a=$("#image_manager .alerts");$.ajax({url:"/admin/admin/filemanager_crop",method:"POST",data:{id:filemanager_fileid,image:t},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){e.html('<div class="load loading"></div>')},success:function(t){b(t),$('#image_manager .ajax_content .bn .column [data-id="'+s+'"]').trigger("click"),l()},error:function(t){a.append('<button class="alert alert-danger js_alert" role="alert">'+t.responseJSON+"</button>"),e.html("Сохранить")}}).done(function(t){e.html("Сохранить")})});var y=$("#js_resizend");y.submit(function(t){t.preventDefault();var e=$("#image_manager #js_resizend button"),a=$("#image_manager .alerts");$.ajax({url:"/admin/admin/filemanager_resize",method:"POST",data:{data:JSON.stringify(y.serializeArray())},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){e.html('<div class="load loading"></div>')},success:function(t){b(t),$('#image_manager .ajax_content .bn .column [data-id="'+s+'"]').trigger("click"),l()},error:function(t){a.append('<button class="alert alert-danger js_alert" role="alert">'+t.responseJSON+"</button>"),e.html("Сохранить")}}).done(function(t){e.html("Сохранить")})}),$(document).on("submit","#filemanager_name_alt",function(t){t.preventDefault();var e=$(t.target[3]),a=$("#image_manager .alerts");$.ajax({url:"/admin/admin/filemanager_namealt",method:"POST",data:{data:JSON.stringify($(t.target).serializeArray())},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){e.html('<div class="load loading"></div>')},success:function(e){var a=$("#image_manager .bn [data-id="+e.id+"]");a.attr("data-name",e.name),a.attr("data-alt",e.alt),$("#image_manager .bn [data-id="+e.id+"] .title").text(e.name),$(t.target[1]).val(e.name),$(t.target[2]).val(e.alt),$('#image_manager .ajax_content .bn .column [data-id="'+s+'"]').trigger("click"),l()},error:function(t){a.append('<button class="alert alert-danger js_alert" role="alert">'+t.responseJSON+"</button>"),e.html("Сохранить")}}).done(function(t){e.html("Сохранить")})}),$(document).on("click","#image_manager .js_delete",function(t){var e=t.target.dataset.id;$("#image_manager .delete_block").addClass("active"),$("#image_manager .delete_block .js_ok").attr("data-id",e),$("#image_manager .overlay_modal").css("display","block")}),$(document).on("click","#image_manager .delete_block .js_ok",function(t){var e=$(t.target),a=$("#image_manager .alerts");$.ajax({url:"/admin/admin/filemanager_del",method:"POST",data:{id:t.target.dataset.id},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){e.html('<div class="load loading"></div>')},success:function(e){$("#image_manager .right .act").html(" --- "),$("#image_manager .right .monitor").html(" --- "),$("#image_manager .right .info").html(" --- "),$("#image_manager .right .del").html(" --- "),$("#image_manager #filemanager_search input").val(""),$("#image_manager .bn [data-id="+t.target.dataset.id+"]").closest(".bn").remove(),l()},error:function(t){a.append('<button class="alert alert-danger js_alert" role="alert">'+t.responseJSON+"</button>"),e.html("Да")}}).done(function(t){e.html("Да")})}),$(document).on("click","#image_manager .delete_block .js_no",function(t){$("#image_manager .delete_block .js_ok").removeAttr("data-id"),l()}),$("#image_manager .js_reload").click(function(){h()}),$(document).on("submit","#filemanager_search",function(t){t.preventDefault();var e=$(t.target[1]),a=$("#image_manager .alerts"),i=$("#image_manager .ajax_content .flex");$.ajax({url:"/admin/admin/filemanager_search",method:"POST",data:{data:JSON.stringify($(t.target).serializeArray())},headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){e.html('<div class="load loading"></div>')},success:function(t){$("#image_manager .ajax_content .flex").empty(),i.html(t)},error:function(t){a.append('<button class="alert alert-danger js_alert" role="alert">'+t.responseJSON+"</button>"),e.html("Искать!")}}).done(function(t){e.html("Искать!")})}),$(document).on("click","#image_manager .js_file_set",function(t){0!=Object.keys(o).length?(r?(console.log(22),i.insertHtml('<p><img src="'+location.protocol+"//"+location.hostname+"/files/"+o.image+'" alt="'+o.alt+'" style="width: '+o.width+"px; height: "+o.height+'px;"></p>')):($("#filemanager_create_"+n).html('<img src="'+location.protocol+"//"+location.hostname+"/files/"+o.image+'">'),$("#filemanager_server_image_"+n).val(o.image)),$("#image_manager").modal("hide")):$("#image_manager .alerts").append('<button class="alert alert-danger js_alert" role="alert">Вы не выбрали изображение!</button>')})},ZR5S:function(t,e){!function(t,e,a,i){"use strict";if(t.console=t.console||{info:function(t){}},a)if(a.fn.fancybox)console.info("fancyBox already initialized");else{var n,o,s={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:a.noop,beforeLoad:a.noop,afterLoad:a.noop,beforeShow:a.noop,afterShow:a.noop,beforeClose:a.noop,afterClose:a.noop,onActivate:a.noop,onDeactivate:a.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schliessen",NEXT:"Weiter",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Maßstab"}}},r=a(t),c=a(e),l=0,h=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)},d=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)},p=function(){var t,a=e.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==a.style[t])return i[t];return"transitionend"}(),u=function(t){return t&&t.length&&t[0].offsetHeight},m=function(t,e){var i=a.extend(!0,{},t,e);return a.each(e,function(t,e){a.isArray(e)&&(i[t]=e)}),i},f=function(t,e,i){this.opts=m({index:i},a.fancybox.defaults),a.isPlainObject(e)&&(this.opts=m(this.opts,e)),a.fancybox.isMobile&&(this.opts=m(this.opts,this.opts.mobile)),this.id=this.opts.id||++l,this.currIndex=parseInt(this.opts.index,10)||0,this.prevIndex=null,this.prevPos=null,this.currPos=0,this.firstRun=!0,this.group=[],this.slides={},this.addContent(t),this.group.length&&this.init()};a.extend(f.prototype,{init:function(){var i,n,o=this,s=o.group[o.currIndex].opts;s.closeExisting&&a.fancybox.close(!0),a("body").addClass("fancybox-active"),!a.fancybox.getInstance()&&!1!==s.hideScrollbar&&!a.fancybox.isMobile&&e.body.scrollHeight>t.innerHeight&&(a("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(t.innerWidth-e.documentElement.clientWidth)+"px;}</style>"),a("body").addClass("compensate-for-scrollbar")),n="",a.each(s.buttons,function(t,e){n+=s.btnTpl[e]||""}),i=a(o.translate(o,s.baseTpl.replace("{{buttons}}",n).replace("{{arrows}}",s.btnTpl.arrowLeft+s.btnTpl.arrowRight))).attr("id","fancybox-container-"+o.id).addClass(s.baseClass).data("FancyBox",o).appendTo(s.parentEl),o.$refs={container:i},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){o.$refs[t]=i.find(".fancybox-"+t)}),o.trigger("onInit"),o.activate(),o.jumpTo(o.currIndex)},translate:function(t,e){var a=t.opts.i18n[t.opts.lang];return e.replace(/\{\{(\w+)\}\}/g,function(t,e){var i=a[e];return void 0===i?t:i})},addContent:function(t){var e,i=this,n=a.makeArray(t);a.each(n,function(t,e){var n,o,s,r,c,l={},h={};a.isPlainObject(e)?(l=e,h=e.opts||e):"object"===a.type(e)&&a(e).length?(h=(n=a(e)).data()||{},(h=a.extend(!0,{},h,h.options)).$orig=n,l.src=i.opts.src||h.src||n.attr("href"),l.type||l.src||(l.type="inline",l.src=e)):l={type:"html",src:e+""},l.opts=a.extend(!0,{},i.opts,h),a.isArray(h.buttons)&&(l.opts.buttons=h.buttons),a.fancybox.isMobile&&l.opts.mobile&&(l.opts=m(l.opts,l.opts.mobile)),o=l.type||l.opts.type,r=l.src||"",!o&&r&&((s=r.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(o="video",l.opts.video.format||(l.opts.video.format="video/"+("ogv"===s[1]?"ogg":s[1]))):r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?o="image":r.match(/\.(pdf)((\?|#).*)?$/i)?o="iframe":"#"===r.charAt(0)&&(o="inline")),o?l.type=o:i.trigger("objectNeedsType",l),l.contentType||(l.contentType=a.inArray(l.type,["html","inline","ajax"])>-1?"html":l.type),l.index=i.group.length,"auto"==l.opts.smallBtn&&(l.opts.smallBtn=a.inArray(l.type,["html","inline","ajax"])>-1),"auto"===l.opts.toolbar&&(l.opts.toolbar=!l.opts.smallBtn),l.$thumb=l.opts.$thumb||null,l.opts.$trigger&&l.index===i.opts.index&&(l.$thumb=l.opts.$trigger.find("img:first"),l.$thumb.length&&(l.opts.$orig=l.opts.$trigger)),l.$thumb&&l.$thumb.length||!l.opts.$orig||(l.$thumb=l.opts.$orig.find("img:first")),l.$thumb&&!l.$thumb.length&&(l.$thumb=null),l.thumb=l.opts.thumb||(l.$thumb?l.$thumb[0].src:null),"function"===a.type(l.opts.caption)&&(l.opts.caption=l.opts.caption.apply(e,[i,l])),"function"===a.type(i.opts.caption)&&(l.opts.caption=i.opts.caption.apply(e,[i,l])),l.opts.caption instanceof a||(l.opts.caption=void 0===l.opts.caption?"":l.opts.caption+""),"ajax"===l.type&&(c=r.split(/\s+/,2)).length>1&&(l.src=c.shift(),l.opts.filter=c.shift()),l.opts.modal&&(l.opts=a.extend(!0,l.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),i.group.push(l)}),Object.keys(i.slides).length&&(i.updateControls(),(e=i.Thumbs)&&e.isActive&&(e.create(),e.focus()))},addEvents:function(){var e=this;e.removeEvents(),e.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),e.close(t)}).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),e.previous()}).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),e.next()}).on("click.fb","[data-fancybox-zoom]",function(t){e[e.isScaledDown()?"scaleToActual":"scaleToFit"]()}),r.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?(e.requestId&&d(e.requestId),e.requestId=h(function(){e.update(t)})):(e.current&&"iframe"===e.current.type&&e.$refs.stage.hide(),setTimeout(function(){e.$refs.stage.show(),e.update(t)},a.fancybox.isMobile?600:250))}),c.on("keydown.fb",function(t){var i=(a.fancybox?a.fancybox.getInstance():null).current,n=t.keyCode||t.which;if(9!=n){if(!(!i.opts.keyboard||t.ctrlKey||t.altKey||t.shiftKey||a(t.target).is("input")||a(t.target).is("textarea")))return 8===n||27===n?(t.preventDefault(),void e.close(t)):37===n||38===n?(t.preventDefault(),void e.previous()):39===n||40===n?(t.preventDefault(),void e.next()):void e.trigger("afterKeydown",t,n)}else i.opts.trapFocus&&e.focus(t)}),e.group[e.currIndex].opts.idleTime&&(e.idleSecondsCounter=0,c.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){e.idleSecondsCounter=0,e.isIdle&&e.showControls(),e.isIdle=!1}),e.idleInterval=t.setInterval(function(){e.idleSecondsCounter++,e.idleSecondsCounter>=e.group[e.currIndex].opts.idleTime&&!e.isDragging&&(e.isIdle=!0,e.idleSecondsCounter=0,e.hideControls())},1e3))},removeEvents:function(){r.off("orientationchange.fb resize.fb"),c.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),this.idleInterval&&(t.clearInterval(this.idleInterval),this.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,e){var i,n,o,s,r,c,l,h,d,p=this,m=p.group.length;if(!(p.isDragging||p.isClosing||p.isAnimating&&p.firstRun)){if(t=parseInt(t,10),!(o=p.current?p.current.opts.loop:p.opts.loop)&&(t<0||t>=m))return!1;if(i=p.firstRun=!Object.keys(p.slides).length,r=p.current,p.prevIndex=p.currIndex,p.prevPos=p.currPos,s=p.createSlide(t),m>1&&((o||s.index<m-1)&&p.createSlide(t+1),(o||s.index>0)&&p.createSlide(t-1)),p.current=s,p.currIndex=s.index,p.currPos=s.pos,p.trigger("beforeShow",i),p.updateControls(),s.forcedDuration=void 0,a.isNumeric(e)?s.forcedDuration=e:e=s.opts[i?"animationDuration":"transitionDuration"],e=parseInt(e,10),n=p.isMoved(s),s.$slide.addClass("fancybox-slide--current"),i)return s.opts.animationEffect&&e&&p.$refs.container.css("transition-duration",e+"ms"),p.$refs.container.addClass("fancybox-is-open").trigger("focus"),p.loadSlide(s),void p.preload("image");c=a.fancybox.getTranslate(r.$slide),l=a.fancybox.getTranslate(p.$refs.stage),a.each(p.slides,function(t,e){a.fancybox.stop(e.$slide,!0)}),r.pos!==s.pos&&(r.isComplete=!1),r.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),n?(d=c.left-(r.pos*c.width+r.pos*r.opts.gutter),a.each(p.slides,function(t,i){i.$slide.removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")});var n=i.pos*c.width+i.pos*i.opts.gutter;a.fancybox.setTranslate(i.$slide,{top:0,left:n-l.left+d}),i.pos!==s.pos&&i.$slide.addClass("fancybox-slide--"+(i.pos>s.pos?"next":"previous")),u(i.$slide),a.fancybox.animate(i.$slide,{top:0,left:(i.pos-s.pos)*c.width+(i.pos-s.pos)*i.opts.gutter},e,function(){i.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),i.pos===p.currPos&&p.complete()})})):e&&s.opts.transitionEffect&&(h="fancybox-animated fancybox-fx-"+s.opts.transitionEffect,r.$slide.addClass("fancybox-slide--"+(r.pos>s.pos?"next":"previous")),a.fancybox.animate(r.$slide,h,e,function(){r.$slide.removeClass(h).removeClass("fancybox-slide--next fancybox-slide--previous")},!1)),s.isLoaded?p.revealContent(s):p.loadSlide(s),p.preload("image")}},createSlide:function(t){var e,i;return i=(i=t%this.group.length)<0?this.group.length+i:i,!this.slides[t]&&this.group[i]&&(e=a('<div class="fancybox-slide"></div>').appendTo(this.$refs.stage),this.slides[t]=a.extend(!0,{},this.group[i],{pos:t,$slide:e,isLoaded:!1}),this.updateSlide(this.slides[t])),this.slides[t]},scaleToActual:function(t,e,i){var n,o,s,r,c,l=this,h=l.current,d=h.$content,p=a.fancybox.getTranslate(h.$slide).width,u=a.fancybox.getTranslate(h.$slide).height,m=h.width,f=h.height;l.isAnimating||l.isMoved()||!d||"image"!=h.type||!h.isLoaded||h.hasError||(l.isAnimating=!0,a.fancybox.stop(d),t=void 0===t?.5*p:t,e=void 0===e?.5*u:e,(n=a.fancybox.getTranslate(d)).top-=a.fancybox.getTranslate(h.$slide).top,n.left-=a.fancybox.getTranslate(h.$slide).left,r=m/n.width,c=f/n.height,o=.5*p-.5*m,s=.5*u-.5*f,m>p&&((o=n.left*r-(t*r-t))>0&&(o=0),o<p-m&&(o=p-m)),f>u&&((s=n.top*c-(e*c-e))>0&&(s=0),s<u-f&&(s=u-f)),l.updateCursor(m,f),a.fancybox.animate(d,{top:s,left:o,scaleX:r,scaleY:c},i||330,function(){l.isAnimating=!1}),l.SlideShow&&l.SlideShow.isActive&&l.SlideShow.stop())},scaleToFit:function(t){var e,i=this,n=i.current,o=n.$content;i.isAnimating||i.isMoved()||!o||"image"!=n.type||!n.isLoaded||n.hasError||(i.isAnimating=!0,a.fancybox.stop(o),e=i.getFitPos(n),i.updateCursor(e.width,e.height),a.fancybox.animate(o,{top:e.top,left:e.left,scaleX:e.width/o.width(),scaleY:e.height/o.height()},t||330,function(){i.isAnimating=!1}))},getFitPos:function(t){var e,i,n,o,s=t.$content,r=t.$slide,c=t.width||t.opts.width,l=t.height||t.opts.height,h={};return!!(t.isLoaded&&s&&s.length)&&(e=a.fancybox.getTranslate(this.$refs.stage).width,i=a.fancybox.getTranslate(this.$refs.stage).height,e-=parseFloat(r.css("paddingLeft"))+parseFloat(r.css("paddingRight"))+parseFloat(s.css("marginLeft"))+parseFloat(s.css("marginRight")),i-=parseFloat(r.css("paddingTop"))+parseFloat(r.css("paddingBottom"))+parseFloat(s.css("marginTop"))+parseFloat(s.css("marginBottom")),c&&l||(c=e,l=i),l*=n=Math.min(1,e/c,i/l),(c*=n)>e-.5&&(c=e),l>i-.5&&(l=i),"image"===t.type?(h.top=Math.floor(.5*(i-l))+parseFloat(r.css("paddingTop")),h.left=Math.floor(.5*(e-c))+parseFloat(r.css("paddingLeft"))):"video"===t.contentType&&(l>c/(o=t.opts.width&&t.opts.height?c/l:t.opts.ratio||16/9)?l=c/o:c>l*o&&(c=l*o)),h.width=c,h.height=l,h)},update:function(t){var e=this;a.each(e.slides,function(a,i){e.updateSlide(i,t)})},updateSlide:function(t,e){var i=t&&t.$content,n=t.width||t.opts.width,o=t.height||t.opts.height,s=t.$slide;this.adjustCaption(t),i&&(n||o||"video"===t.contentType)&&!t.hasError&&(a.fancybox.stop(i),a.fancybox.setTranslate(i,this.getFitPos(t)),t.pos===this.currPos&&(this.isAnimating=!1,this.updateCursor())),this.adjustLayout(t),s.length&&(s.trigger("refresh"),t.pos===this.currPos&&this.$refs.toolbar.add(this.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",s.get(0).scrollHeight>s.get(0).clientHeight)),this.trigger("onUpdate",t,e)},centerSlide:function(t){var e=this,i=e.current,n=i.$slide;!e.isClosing&&i&&(n.siblings().css({transform:"",opacity:""}),n.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),a.fancybox.animate(n,{top:0,left:0,opacity:1},void 0===t?0:t,function(){n.css({transform:"",opacity:""}),i.isComplete||e.complete()},!1))},isMoved:function(t){var e,i,n=t||this.current;return!!n&&(i=a.fancybox.getTranslate(this.$refs.stage),e=a.fancybox.getTranslate(n.$slide),!n.$slide.hasClass("fancybox-animated")&&(Math.abs(e.top-i.top)>.5||Math.abs(e.left-i.left)>.5))},updateCursor:function(t,e){var i,n,o=this.current,s=this.$refs.container;o&&!this.isClosing&&this.Guestures&&(s.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),n=!!(i=this.canPan(t,e))||this.isZoomable(),s.toggleClass("fancybox-is-zoomable",n),a("[data-fancybox-zoom]").prop("disabled",!n),i?s.addClass("fancybox-can-pan"):n&&("zoom"===o.opts.clickContent||a.isFunction(o.opts.clickContent)&&"zoom"==o.opts.clickContent(o))?s.addClass("fancybox-can-zoomIn"):o.opts.touch&&(o.opts.touch.vertical||this.group.length>1)&&"video"!==o.contentType&&s.addClass("fancybox-can-swipe"))},isZoomable:function(){var t,e=this.current;if(e&&!this.isClosing&&"image"===e.type&&!e.hasError){if(!e.isLoaded)return!0;if((t=this.getFitPos(e))&&(e.width>t.width||e.height>t.height))return!0}return!1},isScaledDown:function(t,e){var i=!1,n=this.current,o=n.$content;return void 0!==t&&void 0!==e?i=t<n.width&&e<n.height:o&&(i=(i=a.fancybox.getTranslate(o)).width<n.width&&i.height<n.height),i},canPan:function(t,e){var i=this.current,n=null,o=!1;return"image"===i.type&&(i.isComplete||t&&e)&&!i.hasError&&(o=this.getFitPos(i),void 0!==t&&void 0!==e?n={width:t,height:e}:i.isComplete&&(n=a.fancybox.getTranslate(i.$content)),n&&o&&(o=Math.abs(n.width-o.width)>1.5||Math.abs(n.height-o.height)>1.5)),o},loadSlide:function(t){var e,i,n,o=this;if(!t.isLoading&&!t.isLoaded){if(t.isLoading=!0,!1===o.trigger("beforeLoad",t))return t.isLoading=!1,!1;switch(e=t.type,(i=t.$slide).off("refresh").trigger("onReset").addClass(t.opts.slideClass),e){case"image":o.setImage(t);break;case"iframe":o.setIframe(t);break;case"html":o.setContent(t,t.src||t.content);break;case"video":o.setContent(t,t.opts.video.tpl.replace(/\{\{src\}\}/gi,t.src).replace("{{format}}",t.opts.videoFormat||t.opts.video.format||"").replace("{{poster}}",t.thumb||""));break;case"inline":a(t.src).length?o.setContent(t,a(t.src)):o.setError(t);break;case"ajax":o.showLoading(t),n=a.ajax(a.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,a){"success"===a&&o.setContent(t,e)},error:function(e,a){e&&"abort"!==a&&o.setError(t)}})),i.one("onReset",function(){n.abort()});break;default:o.setError(t)}return!0}},setImage:function(t){var i,n=this;h(function(){h(function(){var e=t.$image;n.isClosing||!t.isLoading||e&&e.length&&e[0].complete||t.hasError||n.showLoading(t)})}),n.checkSrcset(t),t.$content=a('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(t.$slide.addClass("fancybox-slide--image")),!1!==t.opts.preload&&t.opts.width&&t.opts.height&&t.thumb&&(t.width=t.opts.width,t.height=t.opts.height,(i=e.createElement("img")).onerror=function(){a(this).remove(),t.$ghost=null},i.onload=function(){n.afterLoad(t)},t.$ghost=a(i).addClass("fancybox-image").appendTo(t.$content).attr("src",t.thumb)),n.setBigImage(t)},checkSrcset:function(e){var a,i,n,o,s=e.opts.srcset||e.opts.image.srcset;if(s){n=t.devicePixelRatio||1,o=t.innerWidth*n,(i=s.split(",").map(function(t){var e={};return t.trim().split(/\s+/).forEach(function(t,a){var i=parseInt(t.substring(0,t.length-1),10);if(0===a)return e.url=t;i&&(e.value=i,e.postfix=t[t.length-1])}),e})).sort(function(t,e){return t.value-e.value});for(var r=0;r<i.length;r++){var c=i[r];if("w"===c.postfix&&c.value>=o||"x"===c.postfix&&c.value>=n){a=c;break}}!a&&i.length&&(a=i[i.length-1]),a&&(e.src=a.url,e.width&&e.height&&"w"==a.postfix&&(e.height=e.width/e.height*a.value,e.width=a.value),e.opts.srcset=s)}},setBigImage:function(t){var i=this,n=e.createElement("img"),o=a(n);t.$image=o.one("error",function(){i.setError(t)}).one("load",function(){var e;t.$ghost||(i.resolveImageSlideSize(t,this.naturalWidth,this.naturalHeight),i.afterLoad(t)),i.isClosing||(t.opts.srcset&&((e=t.opts.sizes)&&"auto"!==e||(e=(t.width/t.height>1&&r.width()/r.height()>1?"100":Math.round(t.width/t.height*100))+"vw"),o.attr("sizes",e).attr("srcset",t.opts.srcset)),t.$ghost&&setTimeout(function(){t.$ghost&&!i.isClosing&&t.$ghost.hide()},Math.min(300,Math.max(1e3,t.height/1600))),i.hideLoading(t))}).addClass("fancybox-image").attr("src",t.src).appendTo(t.$content),(n.complete||"complete"==n.readyState)&&o.naturalWidth&&o.naturalHeight?o.trigger("load"):n.error&&o.trigger("error")},resolveImageSlideSize:function(t,e,a){var i=parseInt(t.opts.width,10),n=parseInt(t.opts.height,10);t.width=e,t.height=a,i>0&&(t.width=i,t.height=Math.floor(i*a/e)),n>0&&(t.width=Math.floor(n*e/a),t.height=n)},setIframe:function(t){var e,i=this,n=t.opts.iframe,o=t.$slide;a.fancybox.isMobile&&(n.css.overflow="scroll"),t.$content=a('<div class="fancybox-content'+(n.preload?" fancybox-is-hidden":"")+'"></div>').css(n.css).appendTo(o),o.addClass("fancybox-slide--"+t.contentType),t.$iframe=e=a(n.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(n.attr).appendTo(t.$content),n.preload?(i.showLoading(t),e.on("load.fb error.fb",function(e){this.isReady=1,t.$slide.trigger("refresh"),i.afterLoad(t)}),o.on("refresh.fb",function(){var a,i=t.$content,s=n.css.width,r=n.css.height;if(1===e[0].isReady){try{a=e.contents().find("body")}catch(t){}a&&a.length&&a.children().length&&(o.css("overflow","visible"),i.css({width:"100%","max-width":"100%",height:"9999px"}),void 0===s&&(s=Math.ceil(Math.max(a[0].clientWidth,a.outerWidth(!0)))),i.css("width",s||"").css("max-width",""),void 0===r&&(r=Math.ceil(Math.max(a[0].clientHeight,a.outerHeight(!0)))),i.css("height",r||""),o.css("overflow","auto")),i.removeClass("fancybox-is-hidden")}})):i.afterLoad(t),e.attr("src",t.src),o.one("onReset",function(){try{a(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(t){}a(this).off("refresh.fb").empty(),t.isLoaded=!1,t.isRevealed=!1})},setContent:function(t,e){var i;this.isClosing||(this.hideLoading(t),t.$content&&a.fancybox.stop(t.$content),t.$slide.empty(),(i=e)&&i.hasOwnProperty&&i instanceof a&&e.parent().length?(e.hasClass("fancybox-content")&&e.parent(".fancybox-slide--html").trigger("onReset"),t.$placeholder=a("<div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===a.type(e)&&(e=a("<div>").append(a.trim(e)).contents()),t.opts.filter&&(e=a("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){a(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.removeClass("fancybox-content").hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(a(this).empty(),t.isLoaded=!1,t.isRevealed=!1)}),a(e).appendTo(t.$slide),a(e).is("video,audio")&&(a(e).addClass("fancybox-video"),a(e).wrap("<div></div>"),t.contentType="video",t.opts.width=t.opts.width||a(e).attr("width"),t.opts.height=t.opts.height||a(e).attr("height")),t.$content=t.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),t.$content.siblings().hide(),t.$content.length||(t.$content=t.$slide.wrapInner("<div></div>").children().first()),t.$content.addClass("fancybox-content"),t.$slide.addClass("fancybox-slide--"+t.contentType),this.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.trigger("onReset").removeClass("fancybox-slide--"+t.contentType).addClass("fancybox-slide--error"),t.contentType="html",this.setContent(t,this.translate(t,t.opts.errorTpl)),t.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(t){(t=t||this.current)&&!t.$spinner&&(t.$spinner=a(this.translate(this,this.opts.spinnerTpl)).appendTo(t.$slide).hide().fadeIn("fast"))},hideLoading:function(t){(t=t||this.current)&&t.$spinner&&(t.$spinner.stop().remove(),delete t.$spinner)},afterLoad:function(t){this.isClosing||(t.isLoading=!1,t.isLoaded=!0,this.trigger("afterLoad",t),this.hideLoading(t),!t.opts.smallBtn||t.$smallBtn&&t.$smallBtn.length||(t.$smallBtn=a(this.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content)),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&a('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),this.adjustCaption(t),this.adjustLayout(t),t.pos===this.currPos&&this.updateCursor(),this.revealContent(t))},adjustCaption:function(t){var e=t||this.current,a=e.opts.caption,i=this.$refs.caption,n=!1;e.opts.preventCaptionOverlap&&a&&a.length&&(e.pos!==this.currPos?((i=i.clone().empty().appendTo(i.parent())).html(a),n=i.outerHeight(!0),i.empty().remove()):this.$caption&&(n=this.$caption.outerHeight(!0)),e.$slide.css("padding-bottom",n||""))},adjustLayout:function(t){var e,a,i,n,o=t||this.current;o.isLoaded&&!0!==o.opts.disableLayoutFix&&(o.$content.css("margin-bottom",""),o.$content.outerHeight()>o.$slide.height()+.5&&(i=o.$slide[0].style["padding-bottom"],n=o.$slide.css("padding-bottom"),parseFloat(n)>0&&(e=o.$slide[0].scrollHeight,o.$slide.css("padding-bottom",0),Math.abs(e-o.$slide[0].scrollHeight)<1&&(a=n),o.$slide.css("padding-bottom",i))),o.$content.css("margin-bottom",a))},revealContent:function(t){var e,i,n,o,s=this,r=t.$slide,c=!1,l=!1,h=s.isMoved(t),d=t.isRevealed;return t.isRevealed=!0,e=t.opts[s.firstRun?"animationEffect":"transitionEffect"],n=t.opts[s.firstRun?"animationDuration":"transitionDuration"],n=parseInt(void 0===t.forcedDuration?n:t.forcedDuration,10),!h&&t.pos===s.currPos&&n||(e=!1),"zoom"===e&&(t.pos===s.currPos&&n&&"image"===t.type&&!t.hasError&&(l=s.getThumbPos(t))?c=s.getFitPos(t):e="fade"),"zoom"===e?(s.isAnimating=!0,c.scaleX=c.width/l.width,c.scaleY=c.height/l.height,"auto"==(o=t.opts.zoomOpacity)&&(o=Math.abs(t.width/t.height-l.width/l.height)>.1),o&&(l.opacity=.1,c.opacity=1),a.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),l),u(t.$content),void a.fancybox.animate(t.$content,c,n,function(){s.isAnimating=!1,s.complete()})):(s.updateSlide(t),e?(a.fancybox.stop(r),i="fancybox-slide--"+(t.pos>=s.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+e,r.addClass(i).removeClass("fancybox-slide--current"),t.$content.removeClass("fancybox-is-hidden"),u(r),"image"!==t.type&&t.$content.hide().show(0),void a.fancybox.animate(r,"fancybox-slide--current",n,function(){r.removeClass(i).css({transform:"",opacity:""}),t.pos===s.currPos&&s.complete()},!0)):(t.$content.removeClass("fancybox-is-hidden"),d||!h||"image"!==t.type||t.hasError||t.$content.hide().fadeIn("fast"),void(t.pos===s.currPos&&s.complete())))},getThumbPos:function(t){var i,n,o,s,r,c,l=t.$thumb;return!(!l||!function(t){var i,n;return!(!t||t.ownerDocument!==e)&&(a(".fancybox-container").css("pointer-events","none"),i={x:t.getBoundingClientRect().left+t.offsetWidth/2,y:t.getBoundingClientRect().top+t.offsetHeight/2},n=e.elementFromPoint(i.x,i.y)===t,a(".fancybox-container").css("pointer-events",""),n)}(l[0]))&&(n=a.fancybox.getTranslate(l),o=parseFloat(l.css("border-top-width")||0),s=parseFloat(l.css("border-right-width")||0),r=parseFloat(l.css("border-bottom-width")||0),c=parseFloat(l.css("border-left-width")||0),i={top:n.top+o,left:n.left+c,width:n.width-s-c,height:n.height-o-r,scaleX:1,scaleY:1},n.width>0&&n.height>0&&i)},complete:function(){var t,e=this,i=e.current,n={};!e.isMoved()&&i.isLoaded&&(i.isComplete||(i.isComplete=!0,i.$slide.siblings().trigger("onReset"),e.preload("inline"),u(i.$slide),i.$slide.addClass("fancybox-slide--complete"),a.each(e.slides,function(t,i){i.pos>=e.currPos-1&&i.pos<=e.currPos+1?n[i.pos]=i:i&&(a.fancybox.stop(i.$slide),i.$slide.off().remove())}),e.slides=n),e.isAnimating=!1,e.updateCursor(),e.trigger("afterShow"),i.opts.video.autoStart&&i.$slide.find("video,audio").filter(":visible:first").trigger("play").on("ended",a.proxy(e.next,e)),i.opts.autoFocus&&"html"===i.contentType&&((t=i.$content.find("input[autofocus]:enabled:visible:first")).length?t.trigger("focus"):e.focus(null,!0)),i.$slide.scrollTop(0).scrollLeft(0))},preload:function(t){var e=this.slides[this.currPos+1],a=this.slides[this.currPos-1];a&&a.type===t&&this.loadSlide(a),e&&e.type===t&&this.loadSlide(e)},focus:function(t,i){var n,o,s=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");this.isClosing||((n=(n=!t&&this.current&&this.current.isComplete?this.current.$slide.find("*:visible"+(i?":not(.fancybox-close-small)":"")):this.$refs.container.find("*:visible")).filter(s).filter(function(){return"hidden"!==a(this).css("visibility")&&!a(this).hasClass("disabled")})).length?(o=n.index(e.activeElement),t&&t.shiftKey?(o<0||0==o)&&(t.preventDefault(),n.eq(n.length-1).trigger("focus")):(o<0||o==n.length-1)&&(t&&t.preventDefault(),n.eq(0).trigger("focus"))):this.$refs.container.trigger("focus"))},activate:function(){var t=this;a(".fancybox-container").each(function(){var e=a(this).data("FancyBox");e&&e.id!==t.id&&!e.isClosing&&(e.trigger("onDeactivate"),e.removeEvents(),e.isVisible=!1)}),t.isVisible=!0,(t.current||t.isIdle)&&(t.update(),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t,e){var i,n,o,s,r,c,l,d=this,p=d.current,m=function(){d.cleanUp(t)};return!d.isClosing&&(d.isClosing=!0,!1===d.trigger("beforeClose",t)?(d.isClosing=!1,h(function(){d.update()}),!1):(d.removeEvents(),o=p.$content,i=p.opts.animationEffect,n=a.isNumeric(e)?e:i?p.opts.animationDuration:0,p.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==t?a.fancybox.stop(p.$slide):i=!1,p.$slide.siblings().trigger("onReset").remove(),n&&d.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",n+"ms"),d.hideLoading(p),d.hideControls(!0),d.updateCursor(),"zoom"!==i||o&&n&&"image"===p.type&&!d.isMoved()&&!p.hasError&&(l=d.getThumbPos(p))||(i="fade"),"zoom"===i?(a.fancybox.stop(o),c={top:(s=a.fancybox.getTranslate(o)).top,left:s.left,scaleX:s.width/l.width,scaleY:s.height/l.height,width:l.width,height:l.height},"auto"==(r=p.opts.zoomOpacity)&&(r=Math.abs(p.width/p.height-l.width/l.height)>.1),r&&(l.opacity=0),a.fancybox.setTranslate(o,c),u(o),a.fancybox.animate(o,l,n,m),!0):(i&&n?a.fancybox.animate(p.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+i,n,m):!0===t?setTimeout(m,n):m(),!0)))},cleanUp:function(e){var i,n,o,s=this.current.opts.$orig;this.current.$slide.trigger("onReset"),this.$refs.container.empty().remove(),this.trigger("afterClose",e),this.current.opts.backFocus&&(s&&s.length&&s.is(":visible")||(s=this.$trigger),s&&s.length&&(n=t.scrollX,o=t.scrollY,s.trigger("focus"),a("html, body").scrollTop(o).scrollLeft(n))),this.current=null,(i=a.fancybox.getInstance())?i.activate():(a("body").removeClass("fancybox-active compensate-for-scrollbar"),a("#fancybox-style-noscroll").remove())},trigger:function(t,e){var i,n=Array.prototype.slice.call(arguments,1),o=e&&e.opts?e:this.current;if(o?n.unshift(o):o=this,n.unshift(this),a.isFunction(o.opts[t])&&(i=o.opts[t].apply(o,n)),!1===i)return i;"afterClose"!==t&&this.$refs?this.$refs.container.trigger(t+".fb",n):c.trigger(t+".fb",n)},updateControls:function(){var t=this.current,i=t.index,n=this.$refs.container,o=this.$refs.caption,s=t.opts.caption;t.$slide.trigger("refresh"),this.$caption=s&&s.length?o.html(s):null,this.hasHiddenControls||this.isIdle||this.showControls(),n.find("[data-fancybox-count]").html(this.group.length),n.find("[data-fancybox-index]").html(i+1),n.find("[data-fancybox-prev]").prop("disabled",!t.opts.loop&&i<=0),n.find("[data-fancybox-next]").prop("disabled",!t.opts.loop&&i>=this.group.length-1),"image"===t.type?n.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",t.opts.image.src||t.src).show():t.opts.toolbar&&n.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),a(e.activeElement).is(":hidden,[disabled]")&&this.$refs.container.trigger("focus")},hideControls:function(t){var e=["infobar","toolbar","nav"];!t&&this.current.opts.preventCaptionOverlap||e.push("caption"),this.$refs.container.removeClass(e.map(function(t){return"fancybox-show-"+t}).join(" ")),this.hasHiddenControls=!0},showControls:function(){var t=this.current?this.current.opts:this.opts,e=this.$refs.container;this.hasHiddenControls=!1,this.idleSecondsCounter=0,e.toggleClass("fancybox-show-toolbar",!(!t.toolbar||!t.buttons)).toggleClass("fancybox-show-infobar",!!(t.infobar&&this.group.length>1)).toggleClass("fancybox-show-caption",!!this.$caption).toggleClass("fancybox-show-nav",!!(t.arrows&&this.group.length>1)).toggleClass("fancybox-is-modal",!!t.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),a.fancybox={version:"3.5.1",defaults:s,getInstance:function(t){var e=a('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),i=Array.prototype.slice.call(arguments,1);return e instanceof f&&("string"===a.type(t)?e[t].apply(e,i):"function"===a.type(t)&&t.apply(e,i),e)},open:function(t,e,a){return new f(t,e,a)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close(t))},destroy:function(){this.close(!0),c.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:(n=e.createElement("div"),t.getComputedStyle&&t.getComputedStyle(n)&&t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<11)),getTranslate:function(t){var e;return!(!t||!t.length)&&{top:(e=t[0].getBoundingClientRect()).top||0,left:e.left||0,width:e.width,height:e.height,opacity:parseFloat(t.css("opacity"))}},setTranslate:function(t,e){var a="",i={};if(t&&e)return void 0===e.left&&void 0===e.top||(a=(void 0===e.left?t.position().left:e.left)+"px, "+(void 0===e.top?t.position().top:e.top)+"px",a=this.use3d?"translate3d("+a+", 0px)":"translate("+a+")"),void 0!==e.scaleX&&void 0!==e.scaleY?a+=" scale("+e.scaleX+", "+e.scaleY+")":void 0!==e.scaleX&&(a+=" scaleX("+e.scaleX+")"),a.length&&(i.transform=a),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.width&&(i.width=e.width),void 0!==e.height&&(i.height=e.height),t.css(i)},animate:function(t,e,i,n,o){var s,r=this;a.isFunction(i)&&(n=i,i=null),r.stop(t),s=r.getTranslate(t),t.on(p,function(c){(!c||!c.originalEvent||t.is(c.originalEvent.target)&&"z-index"!=c.originalEvent.propertyName)&&(r.stop(t),a.isNumeric(i)&&t.css("transition-duration",""),a.isPlainObject(e)?void 0!==e.scaleX&&void 0!==e.scaleY&&r.setTranslate(t,{top:e.top,left:e.left,width:s.width*e.scaleX,height:s.height*e.scaleY,scaleX:1,scaleY:1}):!0!==o&&t.removeClass(e),a.isFunction(n)&&n(c))}),a.isNumeric(i)&&t.css("transition-duration",i+"ms"),a.isPlainObject(e)?(void 0!==e.scaleX&&void 0!==e.scaleY&&(delete e.width,delete e.height,t.parent().hasClass("fancybox-slide--image")&&t.parent().addClass("fancybox-is-scaling")),a.fancybox.setTranslate(t,e)):t.addClass(e),t.data("timer",setTimeout(function(){t.trigger(p)},i+33))},stop:function(t,e){t&&t.length&&(clearTimeout(t.data("timer")),e&&t.trigger(p),t.off(p).css("transition-duration",""),t.parent().removeClass("fancybox-is-scaling"))}},a.fn.fancybox=function(t){var e;return(e=(t=t||{}).selector||!1)?a("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},g):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},g),this},c.on("click.fb-start","[data-fancybox]",g),c.on("click.fb-start","[data-fancybox-trigger]",function(t){a('[data-fancybox="'+a(this).attr("data-fancybox-trigger")+'"]').eq(a(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:a(this)})}),o=null,c.on("mousedown mouseup focus blur",".fancybox-button",function(t){switch(t.type){case"mousedown":o=a(this);break;case"mouseup":o=null;break;case"focusin":a(".fancybox-button").removeClass("fancybox-focus"),a(this).is(o)||a(this).is("[disabled]")||a(this).addClass("fancybox-focus");break;case"focusout":a(".fancybox-button").removeClass("fancybox-focus")}})}function g(t,e){var i,n,o,s=[],r=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=e||{},t&&t.data&&(e=m(t.data.options,e)),i=e.$target||a(t.currentTarget).trigger("blur"),(o=a.fancybox.getInstance())&&o.$trigger&&o.$trigger.is(i)||(s=e.selector?a(e.selector):(n=i.attr("data-fancybox")||"")?(s=t.data?t.data.items:[]).length?s.filter('[data-fancybox="'+n+'"]'):a('[data-fancybox="'+n+'"]'):[i],(r=a(s).index(i))<0&&(r=0),(o=a.fancybox.open(s,e,r)).$trigger=i))}}(window,document,jQuery),function(t){"use strict";var e={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube-nocookie.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12]+"").replace(/\?/,"&")+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}},a=function(e,a,i){if(e)return i=i||"","object"===t.type(i)&&(i=t.param(i,!0)),t.each(a,function(t,a){e=e.replace("$"+t,a||"")}),i.length&&(e+=(e.indexOf("?")>0?"&":"?")+i),e};t(document).on("objectNeedsType.fb",function(i,n,o){var s,r,c,l,h,d,p,u=o.src||"",m=!1;s=t.extend(!0,{},e,o.opts.media),t.each(s,function(e,i){if(c=u.match(i.matcher)){if(m=i.type,p=e,d={},i.paramPlace&&c[i.paramPlace]){"?"==(h=c[i.paramPlace])[0]&&(h=h.substring(1)),h=h.split("&");for(var n=0;n<h.length;++n){var s=h[n].split("=",2);2==s.length&&(d[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}}return l=t.extend(!0,{},i.params,o.opts[e],d),u="function"===t.type(i.url)?i.url.call(this,c,l,o):a(i.url,c,l),r="function"===t.type(i.thumb)?i.thumb.call(this,c,l,o):a(i.thumb,c),"youtube"===e?u=u.replace(/&t=((\d+)m)?(\d+)s/,function(t,e,a,i){return"&start="+((a?60*parseInt(a,10):0)+parseInt(i,10))}):"vimeo"===e&&(u=u.replace("&%23","#")),!1}}),m?(o.opts.thumb||o.opts.$thumb&&o.opts.$thumb.length||(o.opts.thumb=r),"iframe"===m&&(o.opts=t.extend(!0,o.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),t.extend(o,{type:m,src:u,origSrc:o.src,contentSource:p,contentType:"image"===m?"image":"gmap_place"==p||"gmap_search"==p?"map":"video"})):u&&(o.type=o.opts.defaultType)});var i={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(t){var e,a=this;this[t].loaded?setTimeout(function(){a.done(t)}):this[t].loading||(this[t].loading=!0,(e=document.createElement("script")).type="text/javascript",e.src=this[t].src,"youtube"===t?window.onYouTubeIframeAPIReady=function(){a[t].loaded=!0,a.done(t)}:e.onload=function(){a[t].loaded=!0,a.done(t)},document.body.appendChild(e))},done:function(e){var a,i;"youtube"===e&&delete window.onYouTubeIframeAPIReady,(a=t.fancybox.getInstance())&&(i=a.current.$content.find("iframe"),"youtube"===e&&void 0!==YT&&YT?new YT.Player(i.attr("id"),{events:{onStateChange:function(t){0==t.data&&a.next()}}}):"vimeo"===e&&void 0!==Vimeo&&Vimeo&&new Vimeo.Player(i).on("ended",function(){a.next()}))}};t(document).on({"afterShow.fb":function(t,e,a){e.group.length>1&&("youtube"===a.contentSource||"vimeo"===a.contentSource)&&i.load(a.contentSource)}})}(jQuery),function(t,e,a){"use strict";var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)},n=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)},o=function(e){var a=[];for(var i in e=(e=e.originalEvent||e||t.e).touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e])e[i].pageX?a.push({x:e[i].pageX,y:e[i].pageY}):e[i].clientX&&a.push({x:e[i].clientX,y:e[i].clientY});return a},s=function(t,e,a){return e&&t?"x"===a?t.x-e.x:"y"===a?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},r=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||a.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,i=t[0].attributes,n=i.length;e<n;e++)if("data-fancybox-"===i[e].nodeName.substr(0,14))return!0;return!1},c=function(e){for(var a,i,n,o,s,r=!1;a=e.get(0),void 0,void 0,void 0,void 0,i=t.getComputedStyle(a)["overflow-y"],n=t.getComputedStyle(a)["overflow-x"],o=("scroll"===i||"auto"===i)&&a.scrollHeight>a.clientHeight,s=("scroll"===n||"auto"===n)&&a.scrollWidth>a.clientWidth,!(r=o||s)&&(e=e.parent()).length&&!e.hasClass("fancybox-stage")&&!e.is("body"););return r},l=function(t){this.instance=t,this.$bg=t.$refs.bg,this.$stage=t.$refs.stage,this.$container=t.$refs.container,this.destroy(),this.$container.on("touchstart.fb.touch mousedown.fb.touch",a.proxy(this,"ontouchstart"))};l.prototype.destroy=function(){this.$container.off(".fb.touch"),a(e).off(".fb.touch"),this.requestId&&(n(this.requestId),this.requestId=null),this.tapped&&(clearTimeout(this.tapped),this.tapped=null)},l.prototype.ontouchstart=function(i){var n=a(i.target),l=this.instance,h=l.current,d=h.$slide,p=h.$content,u="touchstart"==i.type;if(u&&this.$container.off("mousedown.fb.touch"),(!i.originalEvent||2!=i.originalEvent.button)&&d.length&&n.length&&!r(n)&&!r(n.parent())&&(n.is("img")||!(i.originalEvent.clientX>n[0].clientWidth+n.offset().left))){if(!h||l.isAnimating||h.$slide.hasClass("fancybox-animated"))return i.stopPropagation(),void i.preventDefault();this.realPoints=this.startPoints=o(i),this.startPoints.length&&(h.touch&&i.stopPropagation(),this.startEvent=i,this.canTap=!0,this.$target=n,this.$content=p,this.opts=h.opts.touch,this.isPanning=!1,this.isSwiping=!1,this.isZooming=!1,this.isScrolling=!1,this.canPan=l.canPan(),this.startTime=(new Date).getTime(),this.distanceX=this.distanceY=this.distance=0,this.canvasWidth=Math.round(d[0].clientWidth),this.canvasHeight=Math.round(d[0].clientHeight),this.contentLastPos=null,this.contentStartPos=a.fancybox.getTranslate(this.$content)||{top:0,left:0},this.sliderStartPos=a.fancybox.getTranslate(d),this.stagePos=a.fancybox.getTranslate(l.$refs.stage),this.sliderStartPos.top-=this.stagePos.top,this.sliderStartPos.left-=this.stagePos.left,this.contentStartPos.top-=this.stagePos.top,this.contentStartPos.left-=this.stagePos.left,a(e).off(".fb.touch").on(u?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",a.proxy(this,"ontouchend")).on(u?"touchmove.fb.touch":"mousemove.fb.touch",a.proxy(this,"ontouchmove")),a.fancybox.isMobile&&e.addEventListener("scroll",this.onscroll,!0),((this.opts||this.canPan)&&(n.is(this.$stage)||this.$stage.find(n).length)||(n.is(".fancybox-image")&&i.preventDefault(),a.fancybox.isMobile&&n.hasClass("fancybox-caption")))&&(this.isScrollable=c(n)||c(n.parent()),a.fancybox.isMobile&&this.isScrollable||i.preventDefault(),(1===this.startPoints.length||h.hasError)&&(this.canPan?(a.fancybox.stop(this.$content),this.isPanning=!0):this.isSwiping=!0,this.$container.addClass("fancybox-is-grabbing")),2===this.startPoints.length&&"image"===h.type&&(h.isLoaded||h.$ghost)&&(this.canTap=!1,this.isSwiping=!1,this.isPanning=!1,this.isZooming=!0,a.fancybox.stop(this.$content),this.centerPointStartX=.5*(this.startPoints[0].x+this.startPoints[1].x)-a(t).scrollLeft(),this.centerPointStartY=.5*(this.startPoints[0].y+this.startPoints[1].y)-a(t).scrollTop(),this.percentageOfImageAtPinchPointX=(this.centerPointStartX-this.contentStartPos.left)/this.contentStartPos.width,this.percentageOfImageAtPinchPointY=(this.centerPointStartY-this.contentStartPos.top)/this.contentStartPos.height,this.startDistanceBetweenFingers=s(this.startPoints[0],this.startPoints[1]))))}},l.prototype.onscroll=function(t){this.isScrolling=!0,e.removeEventListener("scroll",this.onscroll,!0)},l.prototype.ontouchmove=function(t){void 0===t.originalEvent.buttons||0!==t.originalEvent.buttons?this.isScrolling?this.canTap=!1:(this.newPoints=o(t),(this.opts||this.canPan)&&this.newPoints.length&&this.newPoints.length&&(this.isSwiping&&!0===this.isSwiping||t.preventDefault(),this.distanceX=s(this.newPoints[0],this.startPoints[0],"x"),this.distanceY=s(this.newPoints[0],this.startPoints[0],"y"),this.distance=s(this.newPoints[0],this.startPoints[0]),this.distance>0&&(this.isSwiping?this.onSwipe(t):this.isPanning?this.onPan():this.isZooming&&this.onZoom()))):this.ontouchend(t)},l.prototype.onSwipe=function(e){var o,s=this,r=s.instance,c=s.isSwiping,l=s.sliderStartPos.left||0;if(!0!==c)"x"==c&&(s.distanceX>0&&(s.instance.group.length<2||0===s.instance.current.index&&!s.instance.current.opts.loop)?l+=Math.pow(s.distanceX,.8):s.distanceX<0&&(s.instance.group.length<2||s.instance.current.index===s.instance.group.length-1&&!s.instance.current.opts.loop)?l-=Math.pow(-s.distanceX,.8):l+=s.distanceX),s.sliderLastPos={top:"x"==c?0:s.sliderStartPos.top+s.distanceY,left:l},s.requestId&&(n(s.requestId),s.requestId=null),s.requestId=i(function(){s.sliderLastPos&&(a.each(s.instance.slides,function(t,e){var i=e.pos-s.instance.currPos;a.fancybox.setTranslate(e.$slide,{top:s.sliderLastPos.top,left:s.sliderLastPos.left+i*s.canvasWidth+i*e.opts.gutter})}),s.$container.addClass("fancybox-is-sliding"))});else if(Math.abs(s.distance)>10){if(s.canTap=!1,r.group.length<2&&s.opts.vertical?s.isSwiping="y":r.isDragging||!1===s.opts.vertical||"auto"===s.opts.vertical&&a(t).width()>800?s.isSwiping="x":(o=Math.abs(180*Math.atan2(s.distanceY,s.distanceX)/Math.PI),s.isSwiping=o>45&&o<135?"y":"x"),"y"===s.isSwiping&&a.fancybox.isMobile&&s.isScrollable)return void(s.isScrolling=!0);r.isDragging=s.isSwiping,s.startPoints=s.newPoints,a.each(r.slides,function(t,e){var i,n;a.fancybox.stop(e.$slide),i=a.fancybox.getTranslate(e.$slide),n=a.fancybox.getTranslate(r.$refs.stage),e.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}),e.pos===r.current.pos&&(s.sliderStartPos.top=i.top-n.top,s.sliderStartPos.left=i.left-n.left),a.fancybox.setTranslate(e.$slide,{top:i.top-n.top,left:i.left-n.left})}),r.SlideShow&&r.SlideShow.isActive&&r.SlideShow.stop()}},l.prototype.onPan=function(){var t=this;s(t.newPoints[0],t.realPoints[0])<(a.fancybox.isMobile?10:5)?t.startPoints=t.newPoints:(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&n(t.requestId),t.requestId=i(function(){a.fancybox.setTranslate(t.$content,t.contentLastPos)}))},l.prototype.limitMovement=function(){var t,e,a,i,n,o,s=this.canvasWidth,r=this.canvasHeight,c=this.distanceX,l=this.distanceY,h=this.contentStartPos,d=h.left,p=h.top,u=h.width,m=h.height;return n=u>s?d+c:d,o=p+l,t=Math.max(0,.5*s-.5*u),e=Math.max(0,.5*r-.5*m),a=Math.min(s-u,.5*s-.5*u),i=Math.min(r-m,.5*r-.5*m),c>0&&n>t&&(n=t-1+Math.pow(-t+d+c,.8)||0),c<0&&n<a&&(n=a+1-Math.pow(a-d-c,.8)||0),l>0&&o>e&&(o=e-1+Math.pow(-e+p+l,.8)||0),l<0&&o<i&&(o=i+1-Math.pow(i-p-l,.8)||0),{top:o,left:n}},l.prototype.limitPosition=function(t,e,a,i){var n=this.canvasWidth,o=this.canvasHeight;return t=a>n?(t=t>0?0:t)<n-a?n-a:t:Math.max(0,n/2-a/2),{top:e=i>o?(e=e>0?0:e)<o-i?o-i:e:Math.max(0,o/2-i/2),left:t}},l.prototype.onZoom=function(){var e=this,o=e.contentStartPos,r=o.width,c=o.height,l=o.left,h=o.top,d=s(e.newPoints[0],e.newPoints[1])/e.startDistanceBetweenFingers,p=Math.floor(r*d),u=Math.floor(c*d),m=(r-p)*e.percentageOfImageAtPinchPointX,f=(c-u)*e.percentageOfImageAtPinchPointY,g=(e.newPoints[0].x+e.newPoints[1].x)/2-a(t).scrollLeft(),v=(e.newPoints[0].y+e.newPoints[1].y)/2-a(t).scrollTop(),b=g-e.centerPointStartX,y={top:h+(f+(v-e.centerPointStartY)),left:l+(m+b),scaleX:d,scaleY:d};e.canTap=!1,e.newWidth=p,e.newHeight=u,e.contentLastPos=y,e.requestId&&n(e.requestId),e.requestId=i(function(){a.fancybox.setTranslate(e.$content,e.contentLastPos)})},l.prototype.ontouchend=function(t){var i=this.isSwiping,s=this.isPanning,r=this.isZooming,c=this.isScrolling;if(this.endPoints=o(t),this.dMs=Math.max((new Date).getTime()-this.startTime,1),this.$container.removeClass("fancybox-is-grabbing"),a(e).off(".fb.touch"),e.removeEventListener("scroll",this.onscroll,!0),this.requestId&&(n(this.requestId),this.requestId=null),this.isSwiping=!1,this.isPanning=!1,this.isZooming=!1,this.isScrolling=!1,this.instance.isDragging=!1,this.canTap)return this.onTap(t);this.speed=100,this.velocityX=this.distanceX/this.dMs*.5,this.velocityY=this.distanceY/this.dMs*.5,s?this.endPanning():r?this.endZooming():this.endSwiping(i,c)},l.prototype.endSwiping=function(t,e){var i=!1,n=this.instance.group.length,o=Math.abs(this.distanceX),s="x"==t&&n>1&&(this.dMs>130&&o>10||o>50);this.sliderLastPos=null,"y"==t&&!e&&Math.abs(this.distanceY)>50?(a.fancybox.animate(this.instance.current.$slide,{top:this.sliderStartPos.top+this.distanceY+150*this.velocityY,opacity:0},200),i=this.instance.close(!0,250)):s&&this.distanceX>0?i=this.instance.previous(300):s&&this.distanceX<0&&(i=this.instance.next(300)),!1!==i||"x"!=t&&"y"!=t||this.instance.centerSlide(200),this.$container.removeClass("fancybox-is-sliding")},l.prototype.endPanning=function(){var t,e,i;this.contentLastPos&&(!1===this.opts.momentum||this.dMs>350?(t=this.contentLastPos.left,e=this.contentLastPos.top):(t=this.contentLastPos.left+500*this.velocityX,e=this.contentLastPos.top+500*this.velocityY),(i=this.limitPosition(t,e,this.contentStartPos.width,this.contentStartPos.height)).width=this.contentStartPos.width,i.height=this.contentStartPos.height,a.fancybox.animate(this.$content,i,330))},l.prototype.endZooming=function(){var t,e,i,n,o=this.instance.current,s=this.newWidth,r=this.newHeight;this.contentLastPos&&(t=this.contentLastPos.left,n={top:e=this.contentLastPos.top,left:t,width:s,height:r,scaleX:1,scaleY:1},a.fancybox.setTranslate(this.$content,n),s<this.canvasWidth&&r<this.canvasHeight?this.instance.scaleToFit(150):s>o.width||r>o.height?this.instance.scaleToActual(this.centerPointStartX,this.centerPointStartY,150):(i=this.limitPosition(t,e,s,r),a.fancybox.animate(this.$content,i,150)))},l.prototype.onTap=function(e){var i,n=this,s=a(e.target),r=n.instance,c=r.current,l=e&&o(e)||n.startPoints,h=l[0]?l[0].x-a(t).scrollLeft()-n.stagePos.left:0,d=l[0]?l[0].y-a(t).scrollTop()-n.stagePos.top:0,p=function(t){var i=c.opts[t];if(a.isFunction(i)&&(i=i.apply(r,[c,e])),i)switch(i){case"close":r.close(n.startEvent);break;case"toggleControls":r.toggleControls();break;case"next":r.next();break;case"nextOrClose":r.group.length>1?r.next():r.close(n.startEvent);break;case"zoom":"image"==c.type&&(c.isLoaded||c.$ghost)&&(r.canPan()?r.scaleToFit():r.isScaledDown()?r.scaleToActual(h,d):r.group.length<2&&r.close(n.startEvent))}};if((!e.originalEvent||2!=e.originalEvent.button)&&(s.is("img")||!(h>s[0].clientWidth+s.offset().left))){if(s.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))i="Outside";else if(s.is(".fancybox-slide"))i="Slide";else{if(!r.current.$content||!r.current.$content.find(s).addBack().filter(s).length)return;i="Content"}if(n.tapped){if(clearTimeout(n.tapped),n.tapped=null,Math.abs(h-n.tapX)>50||Math.abs(d-n.tapY)>50)return this;p("dblclick"+i)}else n.tapX=h,n.tapY=d,c.opts["dblclick"+i]&&c.opts["dblclick"+i]!==c.opts["click"+i]?n.tapped=setTimeout(function(){n.tapped=null,r.isAnimating||p("click"+i)},500):p("click"+i);return this}},a(e).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new l(e))}).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});var a=function(t){this.instance=t,this.init()};e.extend(a.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this,a=t.instance,i=a.group[a.currIndex].opts.slideShow;t.$button=a.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),a.group.length<2||!i?t.$button.hide():i.progress&&(t.$progress=e('<div class="fancybox-progress"></div>').appendTo(a.$refs.inner))},set:function(t){var a=this.instance,i=a.current;i&&(!0===t||i.opts.loop||a.currIndex<a.group.length-1)?this.isActive&&"video"!==i.contentType&&(this.$progress&&e.fancybox.animate(this.$progress.show(),{scaleX:1},i.opts.slideShow.speed),this.timer=setTimeout(function(){a.jumpTo((a.currIndex+1)%a.group.length)},i.opts.slideShow.speed)):(this.stop(),a.idleSecondsCounter=0,a.showControls())},clear:function(){clearTimeout(this.timer),this.timer=null,this.$progress&&this.$progress.removeAttr("style").hide()},start:function(){var t=this.instance.current;t&&(this.$button.attr("title",t.opts.i18n[t.opts.lang].PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),this.isActive=!0,t.isComplete&&this.set(!0),this.instance.trigger("onSlideShowChange",!0))},stop:function(){var t=this.instance.current;this.clear(),this.$button.attr("title",t.opts.i18n[t.opts.lang].PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),this.isActive=!1,this.instance.trigger("onSlideShowChange",!1),this.$progress&&this.$progress.removeAttr("style").hide()},toggle:function(){this.isActive?this.stop():this.start()}}),e(t).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new a(e))},"beforeShow.fb":function(t,e,a,i){var n=e&&e.SlideShow;i?n&&a.opts.slideShow.autoStart&&n.start():n&&n.isActive&&n.clear()},"afterShow.fb":function(t,e,a){var i=e&&e.SlideShow;i&&i.isActive&&i.set()},"afterKeydown.fb":function(a,i,n,o,s){var r=i&&i.SlideShow;!r||!n.opts.slideShow||80!==s&&32!==s||e(t.activeElement).is("button,a,input")||(o.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var a=e&&e.SlideShow;a&&a.stop()}}),e(t).on("visibilitychange",function(){var a=e.fancybox.getInstance(),i=a&&a.SlideShow;i&&i.isActive&&(t.hidden?i.clear():i.set())})}(document,jQuery),function(t,e){"use strict";var a=function(){for(var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a={},i=0;i<e.length;i++){var n=e[i];if(n&&n[1]in t){for(var o=0;o<n.length;o++)a[e[0][o]]=n[o];return a}}return!1}();if(a){var i={request:function(e){(e=e||t.documentElement)[a.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[a.exitFullscreen]()},toggle:function(e){e=e||t.documentElement,this.isFullscreen()?this.exit():this.request(e)},isFullscreen:function(){return Boolean(t[a.fullscreenElement])},enabled:function(){return Boolean(t[a.fullscreenEnabled])}};e.extend(!0,e.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!1}}),e(t).on(a.fullscreenchange,function(){var t=i.isFullscreen(),a=e.fancybox.getInstance();a&&(a.current&&"image"===a.current.type&&a.isAnimating&&(a.current.$content.css("transition","none"),a.isAnimating=!1,a.update(!0,!0,0)),a.trigger("onFullscreenChange",t),a.$refs.container.toggleClass("fancybox-is-fullscreen",t),a.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!t).toggleClass("fancybox-button--fsexit",t))})}e(t).on({"onInit.fb":function(t,e){a?e&&e.group[e.currIndex].opts.fullScreen?(e.$refs.container.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),i.toggle()}),e.opts.fullScreen&&!0===e.opts.fullScreen.autoStart&&i.request(),e.FullScreen=i):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide():e.$refs.toolbar.find("[data-fancybox-fullscreen]").remove()},"afterKeydown.fb":function(t,e,a,i,n){e&&e.FullScreen&&70===n&&(i.preventDefault(),e.FullScreen.toggle())},"beforeClose.fb":function(t,e){e&&e.FullScreen&&e.$refs.container.hasClass("fancybox-is-fullscreen")&&i.exit()}})}(document,jQuery),function(t,e){"use strict";var a="fancybox-thumbs";e.fancybox.defaults=e.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},e.fancybox.defaults);var i=function(t){this.init(t)};e.extend(i.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this,a=t.group,i=0;e.instance=t,e.opts=a[t.currIndex].opts.thumbs,t.Thumbs=e,e.$button=t.$refs.toolbar.find("[data-fancybox-thumbs]");for(var n=0,o=a.length;n<o&&(a[n].thumb&&i++,!(i>1));n++);i>1&&e.opts?(e.$button.removeAttr("style").on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var t,i=this.instance,n=this.opts.parentEl,o=[];this.$grid||(this.$grid=e('<div class="'+a+" "+a+"-"+this.opts.axis+'"></div>').appendTo(i.$refs.container.find(n).addBack().filter(n)),this.$grid.on("click","a",function(){i.jumpTo(e(this).attr("data-index"))})),this.$list||(this.$list=e('<div class="'+a+'__list">').appendTo(this.$grid)),e.each(i.group,function(e,a){(t=a.thumb)||"image"!==a.type||(t=a.src),o.push('<a href="javascript:;" tabindex="0" data-index="'+e+'"'+(t&&t.length?' style="background-image:url('+t+')"':'class="fancybox-thumbs-missing"')+"></a>")}),this.$list[0].innerHTML=o.join(""),"x"===this.opts.axis&&this.$list.width(parseInt(this.$grid.css("padding-right"),10)+i.group.length*this.$list.children().eq(0).outerWidth(!0))},focus:function(t){var e,a,i=this.$list,n=this.$grid;this.instance.current&&(a=(e=i.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+this.instance.current.index+'"]').addClass("fancybox-thumbs-active")).position(),"y"===this.opts.axis&&(a.top<0||a.top>i.height()-e.outerHeight())?i.stop().animate({scrollTop:i.scrollTop()+a.top},t):"x"===this.opts.axis&&(a.left<n.scrollLeft()||a.left>n.scrollLeft()+(n.width()-e.outerWidth()))&&i.parent().stop().animate({scrollLeft:a.left},t))},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.instance.trigger("onThumbsShow"),this.focus(0)):this.$grid&&this.instance.trigger("onThumbsHide"),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),e(t).on({"onInit.fb":function(t,e){var a;e&&!e.Thumbs&&(a=new i(e)).isActive&&!0===a.opts.autoStart&&a.show()},"beforeShow.fb":function(t,e,a,i){var n=e&&e.Thumbs;n&&n.isVisible&&n.focus(i?0:250)},"afterKeydown.fb":function(t,e,a,i,n){var o=e&&e.Thumbs;o&&o.isActive&&71===n&&(i.preventDefault(),o.toggle())},"beforeClose.fb":function(t,e){var a=e&&e.Thumbs;a&&a.isVisible&&!1!==a.opts.hideOnClose&&a.$grid.hide()}})}(document,jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(t,e){return!t.currentHash&&"inline"!==e.type&&"html"!==e.type&&(e.origSrc||e.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),e(t).on("click","[data-fancybox-share]",function(){var t,a,i,n,o=e.fancybox.getInstance(),s=o.current||null;s&&("function"===e.type(s.opts.share.url)&&(t=s.opts.share.url.apply(s,[o,s])),a=s.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===s.type?encodeURIComponent(s.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,(i=t,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},String(i).replace(/[&<>"'`=\/]/g,function(t){return n[t]}))).replace(/\{\{descr\}\}/g,o.$caption?encodeURIComponent(o.$caption.text()):""),e.fancybox.open({src:o.translate(o,a),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(t,e){o.$refs.container.one("beforeClose.fb",function(){t.close(null,0)}),e.$content.find(".fancybox-share__button").click(function(){return window.open(this.href,"Share","width=550, height=450"),!1})},mobile:{autoFocus:!1}}}))})}(document,jQuery),function(t,e,a){"use strict";function i(){var e=t.location.hash.substr(1),a=e.split("-"),i=a.length>1&&/^\+?\d+$/.test(a[a.length-1])&&parseInt(a.pop(-1),10)||1,n=a.join("-");return{hash:e,index:i<1?1:i,gallery:n}}function n(t){""!==t.gallery&&a("[data-fancybox='"+a.escapeSelector(t.gallery)+"']").eq(t.index-1).focus().trigger("click.fb-start")}function o(t){var e,a;return!!t&&(""!==(a=(e=t.current?t.current.opts:t.opts).hash||(e.$orig?e.$orig.data("fancybox")||e.$orig.data("fancybox-trigger"):""))&&a)}a.escapeSelector||(a.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t})}),a(function(){!1!==a.fancybox.defaults.hash&&(a(e).on({"onInit.fb":function(t,e){var a,n;!1!==e.group[e.currIndex].opts.hash&&(a=i(),(n=o(e))&&a.gallery&&n==a.gallery&&(e.currIndex=a.index-1))},"beforeShow.fb":function(a,i,n,s){var r;n&&!1!==n.opts.hash&&(r=o(i))&&(i.currentHash=r+(i.group.length>1?"-"+(n.index+1):""),t.location.hash!=="#"+i.currentHash&&(s&&!i.origHash&&(i.origHash=t.location.hash),i.hashTimer&&clearTimeout(i.hashTimer),i.hashTimer=setTimeout(function(){"replaceState"in t.history?(t.history[s?"pushState":"replaceState"]({},e.title,t.location.pathname+t.location.search+"#"+i.currentHash),s&&(i.hasCreatedHistory=!0)):t.location.hash=i.currentHash,i.hashTimer=null},300)))},"beforeClose.fb":function(a,i,n){!1!==n.opts.hash&&(clearTimeout(i.hashTimer),i.currentHash&&i.hasCreatedHistory?t.history.back():i.currentHash&&("replaceState"in t.history?t.history.replaceState({},e.title,t.location.pathname+t.location.search+(i.origHash||"")):t.location.hash=i.origHash),i.currentHash=null)}}),a(t).on("hashchange.fb",function(){var t=i(),e=null;a.each(a(".fancybox-container").get().reverse(),function(t,i){var n=a(i).data("FancyBox");if(n&&n.currentHash)return e=n,!1}),e?e.currentHash===t.gallery+"-"+t.index||1===t.index&&e.currentHash==t.gallery||(e.currentHash=null,e.close()):""!==t.gallery&&n(t)}),setTimeout(function(){a.fancybox.getInstance()||n(i())},50))})}(window,document,jQuery),function(t,e){"use strict";var a=(new Date).getTime();e(t).on({"onInit.fb":function(t,e,i){e.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(t){var i=e.current,n=(new Date).getTime();e.group.length<2||!1===i.opts.wheel||"auto"===i.opts.wheel&&"image"!==i.type||(t.preventDefault(),t.stopPropagation(),i.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,n-a<250||(a=n,e[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))})}})}(document,jQuery)}});